"use strict";var vd=Object.create;var Fs=Object.defineProperty;var bd=Object.getOwnPropertyDescriptor;var Dd=Object.getOwnPropertyNames;var Rd=Object.getPrototypeOf,wd=Object.prototype.hasOwnProperty;var k=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Td=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Dd(t))!wd.call(e,i)&&i!==n&&Fs(e,i,{get:()=>t[i],enumerable:!(r=bd(t,i))||r.enumerable});return e};var Ls=(e,t,n)=>(n=e!=null?vd(Rd(e)):{},Td(t||!e||!e.__esModule?Fs(n,"default",{value:e,enumerable:!0}):n,e));var Kn=k(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.thenable=fe.typedArray=fe.stringArray=fe.array=fe.func=fe.error=fe.number=fe.string=fe.boolean=void 0;function Pd(e){return e===!0||e===!1}fe.boolean=Pd;function As(e){return typeof e=="string"||e instanceof String}fe.string=As;function Cd(e){return typeof e=="number"||e instanceof Number}fe.number=Cd;function Sd(e){return e instanceof Error}fe.error=Sd;function Ws(e){return typeof e=="function"}fe.func=Ws;function Hs(e){return Array.isArray(e)}fe.array=Hs;function kd(e){return Hs(e)&&e.every(t=>As(t))}fe.stringArray=kd;function qd(e,t){return Array.isArray(e)&&e.every(t)}fe.typedArray=qd;function Od(e){return e&&Ws(e.then)}fe.thenable=Od});var Ht=k(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.stringArray=ve.array=ve.func=ve.error=ve.number=ve.string=ve.boolean=void 0;function Md(e){return e===!0||e===!1}ve.boolean=Md;function $s(e){return typeof e=="string"||e instanceof String}ve.string=$s;function Ed(e){return typeof e=="number"||e instanceof Number}ve.number=Ed;function Nd(e){return e instanceof Error}ve.error=Nd;function jd(e){return typeof e=="function"}ve.func=jd;function Us(e){return Array.isArray(e)}ve.array=Us;function xd(e){return Us(e)&&e.every(t=>$s(t))}ve.stringArray=xd});var Yi=k(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.Message=M.NotificationType9=M.NotificationType8=M.NotificationType7=M.NotificationType6=M.NotificationType5=M.NotificationType4=M.NotificationType3=M.NotificationType2=M.NotificationType1=M.NotificationType0=M.NotificationType=M.RequestType9=M.RequestType8=M.RequestType7=M.RequestType6=M.RequestType5=M.RequestType4=M.RequestType3=M.RequestType2=M.RequestType1=M.RequestType=M.RequestType0=M.AbstractMessageSignature=M.ParameterStructures=M.ResponseError=M.ErrorCodes=void 0;var Ct=Ht(),Si;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3})(Si||(M.ErrorCodes=Si={}));var ki=class e extends Error{constructor(t,n,r){super(n),this.code=Ct.number(t)?t:Si.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,e.prototype)}toJson(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),t}};M.ResponseError=ki;var Pe=class e{constructor(t){this.kind=t}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};M.ParameterStructures=Pe;Pe.auto=new Pe("auto");Pe.byPosition=new Pe("byPosition");Pe.byName=new Pe("byName");var te=class{constructor(t,n){this.method=t,this.numberOfParams=n}get parameterStructures(){return Pe.auto}};M.AbstractMessageSignature=te;var qi=class extends te{constructor(t){super(t,0)}};M.RequestType0=qi;var Oi=class extends te{constructor(t,n=Pe.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType=Oi;var Mi=class extends te{constructor(t,n=Pe.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType1=Mi;var Ei=class extends te{constructor(t){super(t,2)}};M.RequestType2=Ei;var Ni=class extends te{constructor(t){super(t,3)}};M.RequestType3=Ni;var ji=class extends te{constructor(t){super(t,4)}};M.RequestType4=ji;var xi=class extends te{constructor(t){super(t,5)}};M.RequestType5=xi;var Ii=class extends te{constructor(t){super(t,6)}};M.RequestType6=Ii;var Fi=class extends te{constructor(t){super(t,7)}};M.RequestType7=Fi;var Li=class extends te{constructor(t){super(t,8)}};M.RequestType8=Li;var Ai=class extends te{constructor(t){super(t,9)}};M.RequestType9=Ai;var Wi=class extends te{constructor(t,n=Pe.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType=Wi;var Hi=class extends te{constructor(t){super(t,0)}};M.NotificationType0=Hi;var $i=class extends te{constructor(t,n=Pe.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType1=$i;var Ui=class extends te{constructor(t){super(t,2)}};M.NotificationType2=Ui;var zi=class extends te{constructor(t){super(t,3)}};M.NotificationType3=zi;var Vi=class extends te{constructor(t){super(t,4)}};M.NotificationType4=Vi;var Bi=class extends te{constructor(t){super(t,5)}};M.NotificationType5=Bi;var Ji=class extends te{constructor(t){super(t,6)}};M.NotificationType6=Ji;var Gi=class extends te{constructor(t){super(t,7)}};M.NotificationType7=Gi;var Xi=class extends te{constructor(t){super(t,8)}};M.NotificationType8=Xi;var Qi=class extends te{constructor(t){super(t,9)}};M.NotificationType9=Qi;var zs;(function(e){function t(i){let u=i;return u&&Ct.string(u.method)&&(Ct.string(u.id)||Ct.number(u.id))}e.isRequest=t;function n(i){let u=i;return u&&Ct.string(u.method)&&i.id===void 0}e.isNotification=n;function r(i){let u=i;return u&&(u.result!==void 0||!!u.error)&&(Ct.string(u.id)||Ct.number(u.id)||u.id===null)}e.isResponse=r})(zs||(M.Message=zs={}))});var Zi=k(ut=>{"use strict";var Vs;Object.defineProperty(ut,"__esModule",{value:!0});ut.LRUCache=ut.LinkedMap=ut.Touch=void 0;var be;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(be||(ut.Touch=be={}));var Zn=class{constructor(){this[Vs]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,n=be.None){let r=this._map.get(t);if(r)return n!==be.None&&this.touch(r,n),r.value}set(t,n,r=be.None){let i=this._map.get(t);if(i)i.value=n,r!==be.None&&this.touch(i,r);else{switch(i={key:t,value:n,next:void 0,previous:void 0},r){case be.None:this.addItemLast(i);break;case be.First:this.addItemFirst(i);break;case be.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){let n=this._map.get(t);if(n)return this._map.delete(t),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,n){let r=this._state,i=this._head;for(;i;){if(n?t.bind(n)(i.value,i.key,this):t(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(Vs=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>t;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{let n=t.next,r=t.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}t.next=void 0,t.previous=void 0,this._state++}touch(t,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==be.First&&n!==be.Last)){if(n===be.First){if(t===this._head)return;let r=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(n===be.Last){if(t===this._tail)return;let r=t.next,i=t.previous;t===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){let t=[];return this.forEach((n,r)=>{t.push([r,n])}),t}fromJSON(t){this.clear();for(let[n,r]of t)this.set(n,r)}};ut.LinkedMap=Zn;var Ki=class extends Zn{constructor(t,n=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,n=be.AsNew){return super.get(t,n)}peek(t){return super.get(t,be.None)}set(t,n){return super.set(t,n,be.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};ut.LRUCache=Ki});var Js=k(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.Disposable=void 0;var Bs;(function(e){function t(n){return{dispose:n}}e.create=t})(Bs||(er.Disposable=Bs={}))});var lt=k(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});var eo;function to(){if(eo===void 0)throw new Error("No runtime abstraction layer installed");return eo}(function(e){function t(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");eo=n}e.install=t})(to||(to={}));no.default=to});var Ut=k($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.Emitter=$t.Event=void 0;var Id=lt(),Gs;(function(e){let t={dispose(){}};e.None=function(){return t}})(Gs||($t.Event=Gs={}));var ro=class{add(t,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(t,n)})}remove(t,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,u=this._callbacks.length;i<u;i++)if(this._callbacks[i]===t)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let u=0,h=r.length;u<h;u++)try{n.push(r[u].apply(i[u],t))}catch(_){(0,Id.default)().console.error(_)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},tr=class e{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,n,r)=>{this._callbacks||(this._callbacks=new ro),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,n),i.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};$t.Emitter=tr;tr._noop=function(){}});var ir=k(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.CancellationTokenSource=zt.CancellationToken=void 0;var Fd=lt(),Ld=Ht(),io=Ut(),nr;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:io.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:io.Event.None});function t(n){let r=n;return r&&(r===e.None||r===e.Cancelled||Ld.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.is=t})(nr||(zt.CancellationToken=nr={}));var Ad=Object.freeze(function(e,t){let n=(0,Fd.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}),rr=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ad:(this._emitter||(this._emitter=new io.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},oo=class{get token(){return this._token||(this._token=new rr),this._token}cancel(){this._token?this._token.cancel():this._token=nr.Cancelled}dispose(){this._token?this._token instanceof rr&&this._token.dispose():this._token=nr.None}};zt.CancellationTokenSource=oo});var Xs=k(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.SharedArrayReceiverStrategy=Vt.SharedArraySenderStrategy=void 0;var Wd=ir(),yn;(function(e){e.Continue=0,e.Cancelled=1})(yn||(yn={}));var so=class{constructor(){this.buffers=new Map}enableCancellation(t){if(t.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=yn.Continue,this.buffers.set(t.id,n),t.$cancellationData=n}async sendCancellation(t,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,yn.Cancelled)}cleanup(t){this.buffers.delete(t)}dispose(){this.buffers.clear()}};Vt.SharedArraySenderStrategy=so;var ao=class{constructor(t){this.data=new Int32Array(t,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===yn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},co=class{constructor(t){this.token=new ao(t)}cancel(){}dispose(){}},uo=class{constructor(){this.kind="request"}createCancellationTokenSource(t){let n=t.$cancellationData;return n===void 0?new Wd.CancellationTokenSource:new co(n)}};Vt.SharedArrayReceiverStrategy=uo});var fo=k(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.Semaphore=void 0;var Hd=lt(),lo=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((n,r)=>{this._waiting.push({thunk:t,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Hd.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=t.thunk();n instanceof Promise?n.then(r=>{this._active--,t.resolve(r),this.runNext()},r=>{this._active--,t.reject(r),this.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(n){this._active--,t.reject(n),this.runNext()}}};or.Semaphore=lo});var Ys=k(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.ReadableStreamMessageReader=dt.AbstractMessageReader=dt.MessageReader=void 0;var go=lt(),Bt=Ht(),ho=Ut(),$d=fo(),Qs;(function(e){function t(n){let r=n;return r&&Bt.func(r.listen)&&Bt.func(r.dispose)&&Bt.func(r.onError)&&Bt.func(r.onClose)&&Bt.func(r.onPartialMessage)}e.is=t})(Qs||(dt.MessageReader=Qs={}));var sr=class{constructor(){this.errorEmitter=new ho.Emitter,this.closeEmitter=new ho.Emitter,this.partialMessageEmitter=new ho.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t)}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${Bt.string(t.message)?t.message:"unknown"}`)}};dt.AbstractMessageReader=sr;var po;(function(e){function t(n){let r,i,u,h=new Map,_,C=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(u=n.contentDecoder,h.set(u.name,u)),n.contentDecoders!==void 0)for(let S of n.contentDecoders)h.set(S.name,S);if(n.contentTypeDecoder!==void 0&&(_=n.contentTypeDecoder,C.set(_.name,_)),n.contentTypeDecoders!==void 0)for(let S of n.contentTypeDecoders)C.set(S.name,S)}return _===void 0&&(_=(0,go.default)().applicationJson.decoder,C.set(_.name,_)),{charset:r,contentDecoder:u,contentDecoders:h,contentTypeDecoder:_,contentTypeDecoders:C}}e.fromOptions=t})(po||(po={}));var mo=class extends sr{constructor(t,n){super(),this.readable=t,this.options=po.fromOptions(n),this.buffer=(0,go.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new $d.Semaphore(1)}set partialMessageTimeout(t){this._partialMessageTimeout=t}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(t){try{for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let u=parseInt(i);if(isNaN(u)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=u}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,go.default)().timer.setTimeout((t,n)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};dt.ReadableStreamMessageReader=mo});var na=k(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.WriteableStreamMessageWriter=ft.AbstractMessageWriter=ft.MessageWriter=void 0;var Ks=lt(),_n=Ht(),Ud=fo(),Zs=Ut(),zd="Content-Length: ",ea=`\r
`,ta;(function(e){function t(n){let r=n;return r&&_n.func(r.dispose)&&_n.func(r.onClose)&&_n.func(r.onError)&&_n.func(r.write)}e.is=t})(ta||(ft.MessageWriter=ta={}));var ar=class{constructor(){this.errorEmitter=new Zs.Emitter,this.closeEmitter=new Zs.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t,n,r){this.errorEmitter.fire([this.asError(t),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${_n.string(t.message)?t.message:"unknown"}`)}};ft.AbstractMessageWriter=ar;var yo;(function(e){function t(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Ks.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Ks.default)().applicationJson.encoder}}e.fromOptions=t})(yo||(yo={}));var _o=class extends ar{constructor(t,n){super(),this.writable=t,this.options=yo.fromOptions(n),this.errorCount=0,this.writeSemaphore=new Ud.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(zd,r.byteLength.toString(),ea),i.push(ea),this.doWrite(t,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(t,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,t),Promise.reject(i)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){this.writable.end()}};ft.WriteableStreamMessageWriter=_o});var ra=k(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.AbstractMessageBuffer=void 0;var Vd=13,Bd=10,Jd=`\r
`,vo=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){let n=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(t=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,u=0;e:for(;r<this._chunks.length;){let S=this._chunks[r];for(i=0;i<S.length;){switch(S[i]){case Vd:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case Bd:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}u+=S.byteLength,r++}if(n!==4)return;let h=this._read(u+i),_=new Map,C=this.toString(h,"ascii").split(Jd);if(C.length<2)return _;for(let S=0;S<C.length-2;S++){let O=C[S],N=O.indexOf(":");if(N===-1)throw new Error(`Message header must separate key and value using ':'
${O}`);let j=O.substr(0,N),ue=O.substr(N+1).trim();_.set(t?j.toLowerCase():j,ue)}return _}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let u=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(u)}if(this._chunks[0].byteLength>t){let u=this._chunks[0],h=this.asNative(u,t);return this._chunks[0]=u.slice(t),this._totalLength-=t,h}let n=this.allocNative(t),r=0,i=0;for(;t>0;){let u=this._chunks[i];if(u.byteLength>t){let h=u.slice(0,t);n.set(h,r),r+=t,this._chunks[i]=u.slice(t),this._totalLength-=t,t-=t}else n.set(u,r),r+=u.byteLength,this._chunks.shift(),this._totalLength-=u.byteLength,t-=u.byteLength}return n}};cr.AbstractMessageBuffer=vo});var ca=k(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.createMessageConnection=F.ConnectionOptions=F.MessageStrategy=F.CancellationStrategy=F.CancellationSenderStrategy=F.CancellationReceiverStrategy=F.RequestCancellationReceiverStrategy=F.IdCancellationReceiverStrategy=F.ConnectionStrategy=F.ConnectionError=F.ConnectionErrors=F.LogTraceNotification=F.SetTraceNotification=F.TraceFormat=F.TraceValues=F.Trace=F.NullLogger=F.ProgressType=F.ProgressToken=void 0;var ia=lt(),ie=Ht(),E=Yi(),oa=Zi(),vn=Ut(),bo=ir(),Rn;(function(e){e.type=new E.NotificationType("$/cancelRequest")})(Rn||(Rn={}));var Do;(function(e){function t(n){return typeof n=="string"||typeof n=="number"}e.is=t})(Do||(F.ProgressToken=Do={}));var bn;(function(e){e.type=new E.NotificationType("$/progress")})(bn||(bn={}));var Ro=class{constructor(){}};F.ProgressType=Ro;var wo;(function(e){function t(n){return ie.func(n)}e.is=t})(wo||(wo={}));F.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var B;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"})(B||(F.Trace=B={}));var sa;(function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose"})(sa||(F.TraceValues=sa={}));(function(e){function t(r){if(!ie.string(r))return e.Off;switch(r=r.toLowerCase(),r){case"off":return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function n(r){switch(r){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}e.toString=n})(B||(F.Trace=B={}));var Ee;(function(e){e.Text="text",e.JSON="json"})(Ee||(F.TraceFormat=Ee={}));(function(e){function t(n){return ie.string(n)?(n=n.toLowerCase(),n==="json"?e.JSON:e.Text):e.Text}e.fromString=t})(Ee||(F.TraceFormat=Ee={}));var To;(function(e){e.type=new E.NotificationType("$/setTrace")})(To||(F.SetTraceNotification=To={}));var ur;(function(e){e.type=new E.NotificationType("$/logTrace")})(ur||(F.LogTraceNotification=ur={}));var Dn;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"})(Dn||(F.ConnectionErrors=Dn={}));var Jt=class e extends Error{constructor(t,n){super(n),this.code=t,Object.setPrototypeOf(this,e.prototype)}};F.ConnectionError=Jt;var Po;(function(e){function t(n){let r=n;return r&&ie.func(r.cancelUndispatched)}e.is=t})(Po||(F.ConnectionStrategy=Po={}));var lr;(function(e){function t(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&ie.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ie.func(r.dispose))}e.is=t})(lr||(F.IdCancellationReceiverStrategy=lr={}));var Co;(function(e){function t(n){let r=n;return r&&r.kind==="request"&&ie.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ie.func(r.dispose))}e.is=t})(Co||(F.RequestCancellationReceiverStrategy=Co={}));var dr;(function(e){e.Message=Object.freeze({createCancellationTokenSource(n){return new bo.CancellationTokenSource}});function t(n){return lr.is(n)||Co.is(n)}e.is=t})(dr||(F.CancellationReceiverStrategy=dr={}));var fr;(function(e){e.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Rn.type,{id:r})},cleanup(n){}});function t(n){let r=n;return r&&ie.func(r.sendCancellation)&&ie.func(r.cleanup)}e.is=t})(fr||(F.CancellationSenderStrategy=fr={}));var hr;(function(e){e.Message=Object.freeze({receiver:dr.Message,sender:fr.Message});function t(n){let r=n;return r&&dr.is(r.receiver)&&fr.is(r.sender)}e.is=t})(hr||(F.CancellationStrategy=hr={}));var gr;(function(e){function t(n){let r=n;return r&&ie.func(r.handleMessage)}e.is=t})(gr||(F.MessageStrategy=gr={}));var aa;(function(e){function t(n){let r=n;return r&&(hr.is(r.cancellationStrategy)||Po.is(r.connectionStrategy)||gr.is(r.messageStrategy))}e.is=t})(aa||(F.ConnectionOptions=aa={}));var ze;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"})(ze||(ze={}));function Gd(e,t,n,r){let i=n!==void 0?n:F.NullLogger,u=0,h=0,_=0,C="2.0",S,O=new Map,N,j=new Map,ue=new Map,we,de=new oa.LinkedMap,ge=new Map,V=new Set,y=new Map,m=B.Off,w=Ee.Text,L,Y=ze.New,oe=new vn.Emitter,We=new vn.Emitter,Rt=new vn.Emitter,st=new vn.Emitter,at=new vn.Emitter,Te=r&&r.cancellationStrategy?r.cancellationStrategy:hr.Message;function jt(l){if(l===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+l.toString()}function xt(l){return l===null?"res-unknown-"+(++_).toString():"res-"+l.toString()}function In(){return"not-"+(++h).toString()}function Ci(l,b){E.Message.isRequest(b)?l.set(jt(b.id),b):E.Message.isResponse(b)?l.set(xt(b.id),b):l.set(In(),b)}function Fn(l){}function dn(){return Y===ze.Listening}function wt(){return Y===ze.Closed}function Ze(){return Y===ze.Disposed}function It(){(Y===ze.New||Y===ze.Listening)&&(Y=ze.Closed,We.fire(void 0))}function Tt(l){oe.fire([l,void 0,void 0])}function Ln(l){oe.fire(l)}e.onClose(It),e.onError(Tt),t.onClose(It),t.onError(Ln);function fn(){we||de.size===0||(we=(0,ia.default)().timer.setImmediate(()=>{we=void 0,An()}))}function hn(l){E.Message.isRequest(l)?Hn(l):E.Message.isNotification(l)?Un(l):E.Message.isResponse(l)?$n(l):Ft(l)}function An(){if(de.size===0)return;let l=de.shift();try{let b=r?.messageStrategy;gr.is(b)?b.handleMessage(l,hn):hn(l)}finally{fn()}}let Wn=l=>{try{if(E.Message.isNotification(l)&&l.method===Rn.type.method){let b=l.params.id,T=jt(b),q=de.get(T);if(E.Message.isRequest(q)){let J=r?.connectionStrategy,ee=J&&J.cancelUndispatched?J.cancelUndispatched(q,Fn):void 0;if(ee&&(ee.error!==void 0||ee.result!==void 0)){de.delete(T),y.delete(b),ee.id=q.id,Pt(ee,l.method,Date.now()),t.write(ee).catch(()=>i.error("Sending response for canceled message failed."));return}}let G=y.get(b);if(G!==void 0){G.cancel(),Lt(l);return}else V.add(b)}Ci(de,l)}finally{fn()}};function Hn(l){if(Ze())return;function b(A,X,U){let se={jsonrpc:C,id:l.id};A instanceof E.ResponseError?se.error=A.toJson():se.result=A===void 0?null:A,Pt(se,X,U),t.write(se).catch(()=>i.error("Sending response failed."))}function T(A,X,U){let se={jsonrpc:C,id:l.id,error:A.toJson()};Pt(se,X,U),t.write(se).catch(()=>i.error("Sending response failed."))}function q(A,X,U){A===void 0&&(A=null);let se={jsonrpc:C,id:l.id,result:A};Pt(se,X,U),t.write(se).catch(()=>i.error("Sending response failed."))}Bn(l);let G=O.get(l.method),J,ee;G&&(J=G.type,ee=G.handler);let ne=Date.now();if(ee||S){let A=l.id??String(Date.now()),X=lr.is(Te.receiver)?Te.receiver.createCancellationTokenSource(A):Te.receiver.createCancellationTokenSource(l);l.id!==null&&V.has(l.id)&&X.cancel(),l.id!==null&&y.set(A,X);try{let U;if(ee)if(l.params===void 0){if(J!==void 0&&J.numberOfParams!==0){T(new E.ResponseError(E.ErrorCodes.InvalidParams,`Request ${l.method} defines ${J.numberOfParams} params but received none.`),l.method,ne);return}U=ee(X.token)}else if(Array.isArray(l.params)){if(J!==void 0&&J.parameterStructures===E.ParameterStructures.byName){T(new E.ResponseError(E.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by name but received parameters by position`),l.method,ne);return}U=ee(...l.params,X.token)}else{if(J!==void 0&&J.parameterStructures===E.ParameterStructures.byPosition){T(new E.ResponseError(E.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by position but received parameters by name`),l.method,ne);return}U=ee(l.params,X.token)}else S&&(U=S(l.method,l.params,X.token));let se=U;U?se.then?se.then(me=>{y.delete(A),b(me,l.method,ne)},me=>{y.delete(A),me instanceof E.ResponseError?T(me,l.method,ne):me&&ie.string(me.message)?T(new E.ResponseError(E.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${me.message}`),l.method,ne):T(new E.ResponseError(E.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,ne)}):(y.delete(A),b(U,l.method,ne)):(y.delete(A),q(U,l.method,ne))}catch(U){y.delete(A),U instanceof E.ResponseError?b(U,l.method,ne):U&&ie.string(U.message)?T(new E.ResponseError(E.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${U.message}`),l.method,ne):T(new E.ResponseError(E.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,ne)}}else T(new E.ResponseError(E.ErrorCodes.MethodNotFound,`Unhandled method ${l.method}`),l.method,ne)}function $n(l){if(!Ze())if(l.id===null)l.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(l.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let b=l.id,T=ge.get(b);if(Jn(l,T),T!==void 0){ge.delete(b);try{if(l.error){let q=l.error;T.reject(new E.ResponseError(q.code,q.message,q.data))}else if(l.result!==void 0)T.resolve(l.result);else throw new Error("Should never happen.")}catch(q){q.message?i.error(`Response handler '${T.method}' failed with message: ${q.message}`):i.error(`Response handler '${T.method}' failed unexpectedly.`)}}}}function Un(l){if(Ze())return;let b,T;if(l.method===Rn.type.method){let q=l.params.id;V.delete(q),Lt(l);return}else{let q=j.get(l.method);q&&(T=q.handler,b=q.type)}if(T||N)try{if(Lt(l),T)if(l.params===void 0)b!==void 0&&b.numberOfParams!==0&&b.parameterStructures!==E.ParameterStructures.byName&&i.error(`Notification ${l.method} defines ${b.numberOfParams} params but received none.`),T();else if(Array.isArray(l.params)){let q=l.params;l.method===bn.type.method&&q.length===2&&Do.is(q[0])?T({token:q[0],value:q[1]}):(b!==void 0&&(b.parameterStructures===E.ParameterStructures.byName&&i.error(`Notification ${l.method} defines parameters by name but received parameters by position`),b.numberOfParams!==l.params.length&&i.error(`Notification ${l.method} defines ${b.numberOfParams} params but received ${q.length} arguments`)),T(...q))}else b!==void 0&&b.parameterStructures===E.ParameterStructures.byPosition&&i.error(`Notification ${l.method} defines parameters by position but received parameters by name`),T(l.params);else N&&N(l.method,l.params)}catch(q){q.message?i.error(`Notification handler '${l.method}' failed with message: ${q.message}`):i.error(`Notification handler '${l.method}' failed unexpectedly.`)}else Rt.fire(l)}function Ft(l){if(!l){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(l,null,4)}`);let b=l;if(ie.string(b.id)||ie.number(b.id)){let T=b.id,q=ge.get(T);q&&q.reject(new Error("The received response has neither a result nor an error property."))}}function He(l){if(l!=null)switch(m){case B.Verbose:return JSON.stringify(l,null,4);case B.Compact:return JSON.stringify(l);default:return}}function zn(l){if(!(m===B.Off||!L))if(w===Ee.Text){let b;(m===B.Verbose||m===B.Compact)&&l.params&&(b=`Params: ${He(l.params)}

`),L.log(`Sending request '${l.method} - (${l.id})'.`,b)}else et("send-request",l)}function Vn(l){if(!(m===B.Off||!L))if(w===Ee.Text){let b;(m===B.Verbose||m===B.Compact)&&(l.params?b=`Params: ${He(l.params)}

`:b=`No parameters provided.

`),L.log(`Sending notification '${l.method}'.`,b)}else et("send-notification",l)}function Pt(l,b,T){if(!(m===B.Off||!L))if(w===Ee.Text){let q;(m===B.Verbose||m===B.Compact)&&(l.error&&l.error.data?q=`Error data: ${He(l.error.data)}

`:l.result?q=`Result: ${He(l.result)}

`:l.error===void 0&&(q=`No result returned.

`)),L.log(`Sending response '${b} - (${l.id})'. Processing request took ${Date.now()-T}ms`,q)}else et("send-response",l)}function Bn(l){if(!(m===B.Off||!L))if(w===Ee.Text){let b;(m===B.Verbose||m===B.Compact)&&l.params&&(b=`Params: ${He(l.params)}

`),L.log(`Received request '${l.method} - (${l.id})'.`,b)}else et("receive-request",l)}function Lt(l){if(!(m===B.Off||!L||l.method===ur.type.method))if(w===Ee.Text){let b;(m===B.Verbose||m===B.Compact)&&(l.params?b=`Params: ${He(l.params)}

`:b=`No parameters provided.

`),L.log(`Received notification '${l.method}'.`,b)}else et("receive-notification",l)}function Jn(l,b){if(!(m===B.Off||!L))if(w===Ee.Text){let T;if((m===B.Verbose||m===B.Compact)&&(l.error&&l.error.data?T=`Error data: ${He(l.error.data)}

`:l.result?T=`Result: ${He(l.result)}

`:l.error===void 0&&(T=`No result returned.

`)),b){let q=l.error?` Request failed: ${l.error.message} (${l.error.code}).`:"";L.log(`Received response '${b.method} - (${l.id})' in ${Date.now()-b.timerStart}ms.${q}`,T)}else L.log(`Received response ${l.id} without active response promise.`,T)}else et("receive-response",l)}function et(l,b){if(!L||m===B.Off)return;let T={isLSPMessage:!0,type:l,message:b,timestamp:Date.now()};L.log(T)}function ct(){if(wt())throw new Jt(Dn.Closed,"Connection is closed.");if(Ze())throw new Jt(Dn.Disposed,"Connection is disposed.")}function Gn(){if(dn())throw new Jt(Dn.AlreadyListening,"Connection is already listening")}function Xn(){if(!dn())throw new Error("Call listen() first.")}function Ge(l){return l===void 0?null:l}function gn(l){if(l!==null)return l}function pn(l){return l!=null&&!Array.isArray(l)&&typeof l=="object"}function At(l,b){switch(l){case E.ParameterStructures.auto:return pn(b)?gn(b):[Ge(b)];case E.ParameterStructures.byName:if(!pn(b))throw new Error("Received parameters by name but param is not an object literal.");return gn(b);case E.ParameterStructures.byPosition:return[Ge(b)];default:throw new Error(`Unknown parameter structure ${l.toString()}`)}}function mn(l,b){let T,q=l.numberOfParams;switch(q){case 0:T=void 0;break;case 1:T=At(l.parameterStructures,b[0]);break;default:T=[];for(let G=0;G<b.length&&G<q;G++)T.push(Ge(b[G]));if(b.length<q)for(let G=b.length;G<q;G++)T.push(null);break}return T}let tt={sendNotification:(l,...b)=>{ct();let T,q;if(ie.string(l)){T=l;let J=b[0],ee=0,ne=E.ParameterStructures.auto;E.ParameterStructures.is(J)&&(ee=1,ne=J);let A=b.length,X=A-ee;switch(X){case 0:q=void 0;break;case 1:q=At(ne,b[ee]);break;default:if(ne===E.ParameterStructures.byName)throw new Error(`Received ${X} parameters for 'by Name' notification parameter structure.`);q=b.slice(ee,A).map(U=>Ge(U));break}}else{let J=b;T=l.method,q=mn(l,J)}let G={jsonrpc:C,method:T,params:q};return Vn(G),t.write(G).catch(J=>{throw i.error("Sending notification failed."),J})},onNotification:(l,b)=>{ct();let T;return ie.func(l)?N=l:b&&(ie.string(l)?(T=l,j.set(l,{type:void 0,handler:b})):(T=l.method,j.set(l.method,{type:l,handler:b}))),{dispose:()=>{T!==void 0?j.delete(T):N=void 0}}},onProgress:(l,b,T)=>{if(ue.has(b))throw new Error(`Progress handler for token ${b} already registered`);return ue.set(b,T),{dispose:()=>{ue.delete(b)}}},sendProgress:(l,b,T)=>tt.sendNotification(bn.type,{token:b,value:T}),onUnhandledProgress:st.event,sendRequest:(l,...b)=>{ct(),Xn();let T,q,G;if(ie.string(l)){T=l;let A=b[0],X=b[b.length-1],U=0,se=E.ParameterStructures.auto;E.ParameterStructures.is(A)&&(U=1,se=A);let me=b.length;bo.CancellationToken.is(X)&&(me=me-1,G=X);let Me=me-U;switch(Me){case 0:q=void 0;break;case 1:q=At(se,b[U]);break;default:if(se===E.ParameterStructures.byName)throw new Error(`Received ${Me} parameters for 'by Name' request parameter structure.`);q=b.slice(U,me).map(Qn=>Ge(Qn));break}}else{let A=b;T=l.method,q=mn(l,A);let X=l.numberOfParams;G=bo.CancellationToken.is(A[X])?A[X]:void 0}let J=u++,ee;G&&(ee=G.onCancellationRequested(()=>{let A=Te.sender.sendCancellation(tt,J);return A===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${J}`),Promise.resolve()):A.catch(()=>{i.log(`Sending cancellation messages for id ${J} failed`)})}));let ne={jsonrpc:C,id:J,method:T,params:q};return zn(ne),typeof Te.sender.enableCancellation=="function"&&Te.sender.enableCancellation(ne),new Promise(async(A,X)=>{let U=Me=>{A(Me),Te.sender.cleanup(J),ee?.dispose()},se=Me=>{X(Me),Te.sender.cleanup(J),ee?.dispose()},me={method:T,timerStart:Date.now(),resolve:U,reject:se};try{await t.write(ne),ge.set(J,me)}catch(Me){throw i.error("Sending request failed."),me.reject(new E.ResponseError(E.ErrorCodes.MessageWriteError,Me.message?Me.message:"Unknown reason")),Me}})},onRequest:(l,b)=>{ct();let T=null;return wo.is(l)?(T=void 0,S=l):ie.string(l)?(T=null,b!==void 0&&(T=l,O.set(l,{handler:b,type:void 0}))):b!==void 0&&(T=l.method,O.set(l.method,{type:l,handler:b})),{dispose:()=>{T!==null&&(T!==void 0?O.delete(T):S=void 0)}}},hasPendingResponse:()=>ge.size>0,trace:async(l,b,T)=>{let q=!1,G=Ee.Text;T!==void 0&&(ie.boolean(T)?q=T:(q=T.sendNotification||!1,G=T.traceFormat||Ee.Text)),m=l,w=G,m===B.Off?L=void 0:L=b,q&&!wt()&&!Ze()&&await tt.sendNotification(To.type,{value:B.toString(l)})},onError:oe.event,onClose:We.event,onUnhandledNotification:Rt.event,onDispose:at.event,end:()=>{t.end()},dispose:()=>{if(Ze())return;Y=ze.Disposed,at.fire(void 0);let l=new E.ResponseError(E.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let b of ge.values())b.reject(l);ge=new Map,y=new Map,V=new Set,de=new oa.LinkedMap,ie.func(t.dispose)&&t.dispose(),ie.func(e.dispose)&&e.dispose()},listen:()=>{ct(),Gn(),Y=ze.Listening,e.listen(Wn)},inspect:()=>{(0,ia.default)().console.log("inspect")}};return tt.onNotification(ur.type,l=>{if(m===B.Off||!L)return;let b=m===B.Verbose||m===B.Compact;L.log(l.message,b?l.verbose:void 0)}),tt.onNotification(bn.type,l=>{let b=ue.get(l.token);b?b(l.value):st.fire(l)}),tt}F.createMessageConnection=Gd});var pr=k(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.ProgressType=v.ProgressToken=v.createMessageConnection=v.NullLogger=v.ConnectionOptions=v.ConnectionStrategy=v.AbstractMessageBuffer=v.WriteableStreamMessageWriter=v.AbstractMessageWriter=v.MessageWriter=v.ReadableStreamMessageReader=v.AbstractMessageReader=v.MessageReader=v.SharedArrayReceiverStrategy=v.SharedArraySenderStrategy=v.CancellationToken=v.CancellationTokenSource=v.Emitter=v.Event=v.Disposable=v.LRUCache=v.Touch=v.LinkedMap=v.ParameterStructures=v.NotificationType9=v.NotificationType8=v.NotificationType7=v.NotificationType6=v.NotificationType5=v.NotificationType4=v.NotificationType3=v.NotificationType2=v.NotificationType1=v.NotificationType0=v.NotificationType=v.ErrorCodes=v.ResponseError=v.RequestType9=v.RequestType8=v.RequestType7=v.RequestType6=v.RequestType5=v.RequestType4=v.RequestType3=v.RequestType2=v.RequestType1=v.RequestType0=v.RequestType=v.Message=v.RAL=void 0;v.MessageStrategy=v.CancellationStrategy=v.CancellationSenderStrategy=v.CancellationReceiverStrategy=v.ConnectionError=v.ConnectionErrors=v.LogTraceNotification=v.SetTraceNotification=v.TraceFormat=v.TraceValues=v.Trace=void 0;var Z=Yi();Object.defineProperty(v,"Message",{enumerable:!0,get:function(){return Z.Message}});Object.defineProperty(v,"RequestType",{enumerable:!0,get:function(){return Z.RequestType}});Object.defineProperty(v,"RequestType0",{enumerable:!0,get:function(){return Z.RequestType0}});Object.defineProperty(v,"RequestType1",{enumerable:!0,get:function(){return Z.RequestType1}});Object.defineProperty(v,"RequestType2",{enumerable:!0,get:function(){return Z.RequestType2}});Object.defineProperty(v,"RequestType3",{enumerable:!0,get:function(){return Z.RequestType3}});Object.defineProperty(v,"RequestType4",{enumerable:!0,get:function(){return Z.RequestType4}});Object.defineProperty(v,"RequestType5",{enumerable:!0,get:function(){return Z.RequestType5}});Object.defineProperty(v,"RequestType6",{enumerable:!0,get:function(){return Z.RequestType6}});Object.defineProperty(v,"RequestType7",{enumerable:!0,get:function(){return Z.RequestType7}});Object.defineProperty(v,"RequestType8",{enumerable:!0,get:function(){return Z.RequestType8}});Object.defineProperty(v,"RequestType9",{enumerable:!0,get:function(){return Z.RequestType9}});Object.defineProperty(v,"ResponseError",{enumerable:!0,get:function(){return Z.ResponseError}});Object.defineProperty(v,"ErrorCodes",{enumerable:!0,get:function(){return Z.ErrorCodes}});Object.defineProperty(v,"NotificationType",{enumerable:!0,get:function(){return Z.NotificationType}});Object.defineProperty(v,"NotificationType0",{enumerable:!0,get:function(){return Z.NotificationType0}});Object.defineProperty(v,"NotificationType1",{enumerable:!0,get:function(){return Z.NotificationType1}});Object.defineProperty(v,"NotificationType2",{enumerable:!0,get:function(){return Z.NotificationType2}});Object.defineProperty(v,"NotificationType3",{enumerable:!0,get:function(){return Z.NotificationType3}});Object.defineProperty(v,"NotificationType4",{enumerable:!0,get:function(){return Z.NotificationType4}});Object.defineProperty(v,"NotificationType5",{enumerable:!0,get:function(){return Z.NotificationType5}});Object.defineProperty(v,"NotificationType6",{enumerable:!0,get:function(){return Z.NotificationType6}});Object.defineProperty(v,"NotificationType7",{enumerable:!0,get:function(){return Z.NotificationType7}});Object.defineProperty(v,"NotificationType8",{enumerable:!0,get:function(){return Z.NotificationType8}});Object.defineProperty(v,"NotificationType9",{enumerable:!0,get:function(){return Z.NotificationType9}});Object.defineProperty(v,"ParameterStructures",{enumerable:!0,get:function(){return Z.ParameterStructures}});var So=Zi();Object.defineProperty(v,"LinkedMap",{enumerable:!0,get:function(){return So.LinkedMap}});Object.defineProperty(v,"LRUCache",{enumerable:!0,get:function(){return So.LRUCache}});Object.defineProperty(v,"Touch",{enumerable:!0,get:function(){return So.Touch}});var Xd=Js();Object.defineProperty(v,"Disposable",{enumerable:!0,get:function(){return Xd.Disposable}});var ua=Ut();Object.defineProperty(v,"Event",{enumerable:!0,get:function(){return ua.Event}});Object.defineProperty(v,"Emitter",{enumerable:!0,get:function(){return ua.Emitter}});var la=ir();Object.defineProperty(v,"CancellationTokenSource",{enumerable:!0,get:function(){return la.CancellationTokenSource}});Object.defineProperty(v,"CancellationToken",{enumerable:!0,get:function(){return la.CancellationToken}});var da=Xs();Object.defineProperty(v,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return da.SharedArraySenderStrategy}});Object.defineProperty(v,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return da.SharedArrayReceiverStrategy}});var ko=Ys();Object.defineProperty(v,"MessageReader",{enumerable:!0,get:function(){return ko.MessageReader}});Object.defineProperty(v,"AbstractMessageReader",{enumerable:!0,get:function(){return ko.AbstractMessageReader}});Object.defineProperty(v,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return ko.ReadableStreamMessageReader}});var qo=na();Object.defineProperty(v,"MessageWriter",{enumerable:!0,get:function(){return qo.MessageWriter}});Object.defineProperty(v,"AbstractMessageWriter",{enumerable:!0,get:function(){return qo.AbstractMessageWriter}});Object.defineProperty(v,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return qo.WriteableStreamMessageWriter}});var Qd=ra();Object.defineProperty(v,"AbstractMessageBuffer",{enumerable:!0,get:function(){return Qd.AbstractMessageBuffer}});var _e=ca();Object.defineProperty(v,"ConnectionStrategy",{enumerable:!0,get:function(){return _e.ConnectionStrategy}});Object.defineProperty(v,"ConnectionOptions",{enumerable:!0,get:function(){return _e.ConnectionOptions}});Object.defineProperty(v,"NullLogger",{enumerable:!0,get:function(){return _e.NullLogger}});Object.defineProperty(v,"createMessageConnection",{enumerable:!0,get:function(){return _e.createMessageConnection}});Object.defineProperty(v,"ProgressToken",{enumerable:!0,get:function(){return _e.ProgressToken}});Object.defineProperty(v,"ProgressType",{enumerable:!0,get:function(){return _e.ProgressType}});Object.defineProperty(v,"Trace",{enumerable:!0,get:function(){return _e.Trace}});Object.defineProperty(v,"TraceValues",{enumerable:!0,get:function(){return _e.TraceValues}});Object.defineProperty(v,"TraceFormat",{enumerable:!0,get:function(){return _e.TraceFormat}});Object.defineProperty(v,"SetTraceNotification",{enumerable:!0,get:function(){return _e.SetTraceNotification}});Object.defineProperty(v,"LogTraceNotification",{enumerable:!0,get:function(){return _e.LogTraceNotification}});Object.defineProperty(v,"ConnectionErrors",{enumerable:!0,get:function(){return _e.ConnectionErrors}});Object.defineProperty(v,"ConnectionError",{enumerable:!0,get:function(){return _e.ConnectionError}});Object.defineProperty(v,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return _e.CancellationReceiverStrategy}});Object.defineProperty(v,"CancellationSenderStrategy",{enumerable:!0,get:function(){return _e.CancellationSenderStrategy}});Object.defineProperty(v,"CancellationStrategy",{enumerable:!0,get:function(){return _e.CancellationStrategy}});Object.defineProperty(v,"MessageStrategy",{enumerable:!0,get:function(){return _e.MessageStrategy}});var Yd=lt();v.RAL=Yd.default});var ga=k(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});var fa=require("util"),rt=pr(),mr=class e extends rt.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return e.emptyBuffer}fromString(t,n){return Buffer.from(t,n)}toString(t,n){return t instanceof Buffer?t.toString(n):new fa.TextDecoder(n).decode(t)}asNative(t,n){return n===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,n):Buffer.from(t,0,n)}allocNative(t){return Buffer.allocUnsafe(t)}};mr.emptyBuffer=Buffer.allocUnsafe(0);var Oo=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),rt.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),rt.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),rt.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),rt.Disposable.create(()=>this.stream.off("data",t))}},Mo=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),rt.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),rt.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),rt.Disposable.create(()=>this.stream.off("end",t))}write(t,n){return new Promise((r,i)=>{let u=h=>{h==null?r():i(h)};typeof t=="string"?this.stream.write(t,n,u):this.stream.write(t,u)})}end(){this.stream.end()}},ha=Object.freeze({messageBuffer:Object.freeze({create:e=>new mr(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new fa.TextDecoder(t.charset).decode(e)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:e=>new Oo(e),asWritableStream:e=>new Mo(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){let r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){let n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){let r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function Eo(){return ha}(function(e){function t(){rt.RAL.install(ha)}e.install=t})(Eo||(Eo={}));No.default=Eo});var qt=k(H=>{"use strict";var Kd=H&&H.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Zd=H&&H.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Kd(t,e,n)};Object.defineProperty(H,"__esModule",{value:!0});H.createMessageConnection=H.createServerSocketTransport=H.createClientSocketTransport=H.createServerPipeTransport=H.createClientPipeTransport=H.generateRandomPipeName=H.StreamMessageWriter=H.StreamMessageReader=H.SocketMessageWriter=H.SocketMessageReader=H.PortMessageWriter=H.PortMessageReader=H.IPCMessageWriter=H.IPCMessageReader=void 0;var Gt=ga();Gt.default.install();var pa=require("path"),ef=require("os"),tf=require("crypto"),vr=require("net"),Ne=pr();Zd(pr(),H);var jo=class extends Ne.AbstractMessageReader{constructor(t){super(),this.process=t;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(t){return this.process.on("message",t),Ne.Disposable.create(()=>this.process.off("message",t))}};H.IPCMessageReader=jo;var xo=class extends Ne.AbstractMessageWriter{constructor(t){super(),this.process=t,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,t)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};H.IPCMessageWriter=xo;var Io=class extends Ne.AbstractMessageReader{constructor(t){super(),this.onData=new Ne.Emitter,t.on("close",()=>this.fireClose),t.on("error",n=>this.fireError(n)),t.on("message",n=>{this.onData.fire(n)})}listen(t){return this.onData.event(t)}};H.PortMessageReader=Io;var Fo=class extends Ne.AbstractMessageWriter{constructor(t){super(),this.port=t,this.errorCount=0,t.on("close",()=>this.fireClose()),t.on("error",n=>this.fireError(n))}write(t){try{return this.port.postMessage(t),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};H.PortMessageWriter=Fo;var St=class extends Ne.ReadableStreamMessageReader{constructor(t,n="utf-8"){super((0,Gt.default)().stream.asReadableStream(t),n)}};H.SocketMessageReader=St;var kt=class extends Ne.WriteableStreamMessageWriter{constructor(t,n){super((0,Gt.default)().stream.asWritableStream(t),n),this.socket=t}dispose(){super.dispose(),this.socket.destroy()}};H.SocketMessageWriter=kt;var yr=class extends Ne.ReadableStreamMessageReader{constructor(t,n){super((0,Gt.default)().stream.asReadableStream(t),n)}};H.StreamMessageReader=yr;var _r=class extends Ne.WriteableStreamMessageWriter{constructor(t,n){super((0,Gt.default)().stream.asWritableStream(t),n)}};H.StreamMessageWriter=_r;var ma=process.env.XDG_RUNTIME_DIR,nf=new Map([["linux",107],["darwin",103]]);function rf(){let e=(0,tf.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;ma?t=pa.join(ma,`vscode-ipc-${e}.sock`):t=pa.join(ef.tmpdir(),`vscode-${e}.sock`);let n=nf.get(process.platform);return n!==void 0&&t.length>n&&(0,Gt.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t}H.generateRandomPipeName=rf;function of(e,t="utf-8"){let n,r=new Promise((i,u)=>{n=i});return new Promise((i,u)=>{let h=(0,vr.createServer)(_=>{h.close(),n([new St(_,t),new kt(_,t)])});h.on("error",u),h.listen(e,()=>{h.removeListener("error",u),i({onConnected:()=>r})})})}H.createClientPipeTransport=of;function sf(e,t="utf-8"){let n=(0,vr.createConnection)(e);return[new St(n,t),new kt(n,t)]}H.createServerPipeTransport=sf;function af(e,t="utf-8"){let n,r=new Promise((i,u)=>{n=i});return new Promise((i,u)=>{let h=(0,vr.createServer)(_=>{h.close(),n([new St(_,t),new kt(_,t)])});h.on("error",u),h.listen(e,"127.0.0.1",()=>{h.removeListener("error",u),i({onConnected:()=>r})})})}H.createClientSocketTransport=af;function cf(e,t="utf-8"){let n=(0,vr.createConnection)(e,"127.0.0.1");return[new St(n,t),new kt(n,t)]}H.createServerSocketTransport=cf;function uf(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function lf(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function df(e,t,n,r){n||(n=Ne.NullLogger);let i=uf(e)?new yr(e):e,u=lf(t)?new _r(t):t;return Ne.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Ne.createMessageConnection)(i,u,n,r)}H.createMessageConnection=df});var Lo=k((_g,ya)=>{"use strict";ya.exports=qt()});var Dr=k((_a,br)=>{"use strict";(function(e){if(typeof br=="object"&&typeof br.exports=="object"){var t=e(require,_a);t!==void 0&&(br.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0;var n;(function(s){function d(f){return typeof f=="string"}s.is=d})(n||(t.DocumentUri=n={}));var r;(function(s){function d(f){return typeof f=="string"}s.is=d})(r||(t.URI=r={}));var i;(function(s){s.MIN_VALUE=-2147483648,s.MAX_VALUE=2147483647;function d(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=d})(i||(t.integer=i={}));var u;(function(s){s.MIN_VALUE=0,s.MAX_VALUE=2147483647;function d(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=d})(u||(t.uinteger=u={}));var h;(function(s){function d(a,o){return a===Number.MAX_VALUE&&(a=u.MAX_VALUE),o===Number.MAX_VALUE&&(o=u.MAX_VALUE),{line:a,character:o}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&p.uinteger(o.line)&&p.uinteger(o.character)}s.is=f})(h||(t.Position=h={}));var _;(function(s){function d(a,o,g,D){if(p.uinteger(a)&&p.uinteger(o)&&p.uinteger(g)&&p.uinteger(D))return{start:h.create(a,o),end:h.create(g,D)};if(h.is(a)&&h.is(o))return{start:a,end:o};throw new Error("Range#create called with invalid arguments[".concat(a,", ").concat(o,", ").concat(g,", ").concat(D,"]"))}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&h.is(o.start)&&h.is(o.end)}s.is=f})(_||(t.Range=_={}));var C;(function(s){function d(a,o){return{uri:a,range:o}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&_.is(o.range)&&(p.string(o.uri)||p.undefined(o.uri))}s.is=f})(C||(t.Location=C={}));var S;(function(s){function d(a,o,g,D){return{targetUri:a,targetRange:o,targetSelectionRange:g,originSelectionRange:D}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&_.is(o.targetRange)&&p.string(o.targetUri)&&_.is(o.targetSelectionRange)&&(_.is(o.originSelectionRange)||p.undefined(o.originSelectionRange))}s.is=f})(S||(t.LocationLink=S={}));var O;(function(s){function d(a,o,g,D){return{red:a,green:o,blue:g,alpha:D}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&p.numberRange(o.red,0,1)&&p.numberRange(o.green,0,1)&&p.numberRange(o.blue,0,1)&&p.numberRange(o.alpha,0,1)}s.is=f})(O||(t.Color=O={}));var N;(function(s){function d(a,o){return{range:a,color:o}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&_.is(o.range)&&O.is(o.color)}s.is=f})(N||(t.ColorInformation=N={}));var j;(function(s){function d(a,o,g){return{label:a,textEdit:o,additionalTextEdits:g}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&p.string(o.label)&&(p.undefined(o.textEdit)||L.is(o))&&(p.undefined(o.additionalTextEdits)||p.typedArray(o.additionalTextEdits,L.is))}s.is=f})(j||(t.ColorPresentation=j={}));var ue;(function(s){s.Comment="comment",s.Imports="imports",s.Region="region"})(ue||(t.FoldingRangeKind=ue={}));var we;(function(s){function d(a,o,g,D,I,ae){var K={startLine:a,endLine:o};return p.defined(g)&&(K.startCharacter=g),p.defined(D)&&(K.endCharacter=D),p.defined(I)&&(K.kind=I),p.defined(ae)&&(K.collapsedText=ae),K}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&p.uinteger(o.startLine)&&p.uinteger(o.startLine)&&(p.undefined(o.startCharacter)||p.uinteger(o.startCharacter))&&(p.undefined(o.endCharacter)||p.uinteger(o.endCharacter))&&(p.undefined(o.kind)||p.string(o.kind))}s.is=f})(we||(t.FoldingRange=we={}));var de;(function(s){function d(a,o){return{location:a,message:o}}s.create=d;function f(a){var o=a;return p.defined(o)&&C.is(o.location)&&p.string(o.message)}s.is=f})(de||(t.DiagnosticRelatedInformation=de={}));var ge;(function(s){s.Error=1,s.Warning=2,s.Information=3,s.Hint=4})(ge||(t.DiagnosticSeverity=ge={}));var V;(function(s){s.Unnecessary=1,s.Deprecated=2})(V||(t.DiagnosticTag=V={}));var y;(function(s){function d(f){var a=f;return p.objectLiteral(a)&&p.string(a.href)}s.is=d})(y||(t.CodeDescription=y={}));var m;(function(s){function d(a,o,g,D,I,ae){var K={range:a,message:o};return p.defined(g)&&(K.severity=g),p.defined(D)&&(K.code=D),p.defined(I)&&(K.source=I),p.defined(ae)&&(K.relatedInformation=ae),K}s.create=d;function f(a){var o,g=a;return p.defined(g)&&_.is(g.range)&&p.string(g.message)&&(p.number(g.severity)||p.undefined(g.severity))&&(p.integer(g.code)||p.string(g.code)||p.undefined(g.code))&&(p.undefined(g.codeDescription)||p.string((o=g.codeDescription)===null||o===void 0?void 0:o.href))&&(p.string(g.source)||p.undefined(g.source))&&(p.undefined(g.relatedInformation)||p.typedArray(g.relatedInformation,de.is))}s.is=f})(m||(t.Diagnostic=m={}));var w;(function(s){function d(a,o){for(var g=[],D=2;D<arguments.length;D++)g[D-2]=arguments[D];var I={title:a,command:o};return p.defined(g)&&g.length>0&&(I.arguments=g),I}s.create=d;function f(a){var o=a;return p.defined(o)&&p.string(o.title)&&p.string(o.command)}s.is=f})(w||(t.Command=w={}));var L;(function(s){function d(g,D){return{range:g,newText:D}}s.replace=d;function f(g,D){return{range:{start:g,end:g},newText:D}}s.insert=f;function a(g){return{range:g,newText:""}}s.del=a;function o(g){var D=g;return p.objectLiteral(D)&&p.string(D.newText)&&_.is(D.range)}s.is=o})(L||(t.TextEdit=L={}));var Y;(function(s){function d(a,o,g){var D={label:a};return o!==void 0&&(D.needsConfirmation=o),g!==void 0&&(D.description=g),D}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&p.string(o.label)&&(p.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(p.string(o.description)||o.description===void 0)}s.is=f})(Y||(t.ChangeAnnotation=Y={}));var oe;(function(s){function d(f){var a=f;return p.string(a)}s.is=d})(oe||(t.ChangeAnnotationIdentifier=oe={}));var We;(function(s){function d(g,D,I){return{range:g,newText:D,annotationId:I}}s.replace=d;function f(g,D,I){return{range:{start:g,end:g},newText:D,annotationId:I}}s.insert=f;function a(g,D){return{range:g,newText:"",annotationId:D}}s.del=a;function o(g){var D=g;return L.is(D)&&(Y.is(D.annotationId)||oe.is(D.annotationId))}s.is=o})(We||(t.AnnotatedTextEdit=We={}));var Rt;(function(s){function d(a,o){return{textDocument:a,edits:o}}s.create=d;function f(a){var o=a;return p.defined(o)&&wt.is(o.textDocument)&&Array.isArray(o.edits)}s.is=f})(Rt||(t.TextDocumentEdit=Rt={}));var st;(function(s){function d(a,o,g){var D={kind:"create",uri:a};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(D.options=o),g!==void 0&&(D.annotationId=g),D}s.create=d;function f(a){var o=a;return o&&o.kind==="create"&&p.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||p.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||p.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||oe.is(o.annotationId))}s.is=f})(st||(t.CreateFile=st={}));var at;(function(s){function d(a,o,g,D){var I={kind:"rename",oldUri:a,newUri:o};return g!==void 0&&(g.overwrite!==void 0||g.ignoreIfExists!==void 0)&&(I.options=g),D!==void 0&&(I.annotationId=D),I}s.create=d;function f(a){var o=a;return o&&o.kind==="rename"&&p.string(o.oldUri)&&p.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||p.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||p.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||oe.is(o.annotationId))}s.is=f})(at||(t.RenameFile=at={}));var Te;(function(s){function d(a,o,g){var D={kind:"delete",uri:a};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(D.options=o),g!==void 0&&(D.annotationId=g),D}s.create=d;function f(a){var o=a;return o&&o.kind==="delete"&&p.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||p.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||p.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||oe.is(o.annotationId))}s.is=f})(Te||(t.DeleteFile=Te={}));var jt;(function(s){function d(f){var a=f;return a&&(a.changes!==void 0||a.documentChanges!==void 0)&&(a.documentChanges===void 0||a.documentChanges.every(function(o){return p.string(o.kind)?st.is(o)||at.is(o)||Te.is(o):Rt.is(o)}))}s.is=d})(jt||(t.WorkspaceEdit=jt={}));var xt=function(){function s(d,f){this.edits=d,this.changeAnnotations=f}return s.prototype.insert=function(d,f,a){var o,g;if(a===void 0?o=L.insert(d,f):oe.is(a)?(g=a,o=We.insert(d,f,a)):(this.assertChangeAnnotations(this.changeAnnotations),g=this.changeAnnotations.manage(a),o=We.insert(d,f,g)),this.edits.push(o),g!==void 0)return g},s.prototype.replace=function(d,f,a){var o,g;if(a===void 0?o=L.replace(d,f):oe.is(a)?(g=a,o=We.replace(d,f,a)):(this.assertChangeAnnotations(this.changeAnnotations),g=this.changeAnnotations.manage(a),o=We.replace(d,f,g)),this.edits.push(o),g!==void 0)return g},s.prototype.delete=function(d,f){var a,o;if(f===void 0?a=L.del(d):oe.is(f)?(o=f,a=We.del(d,f)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(f),a=We.del(d,o)),this.edits.push(a),o!==void 0)return o},s.prototype.add=function(d){this.edits.push(d)},s.prototype.all=function(){return this.edits},s.prototype.clear=function(){this.edits.splice(0,this.edits.length)},s.prototype.assertChangeAnnotations=function(d){if(d===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},s}(),In=function(){function s(d){this._annotations=d===void 0?Object.create(null):d,this._counter=0,this._size=0}return s.prototype.all=function(){return this._annotations},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),s.prototype.manage=function(d,f){var a;if(oe.is(d)?a=d:(a=this.nextId(),f=d),this._annotations[a]!==void 0)throw new Error("Id ".concat(a," is already in use."));if(f===void 0)throw new Error("No annotation provided for id ".concat(a));return this._annotations[a]=f,this._size++,a},s.prototype.nextId=function(){return this._counter++,this._counter.toString()},s}(),Ci=function(){function s(d){var f=this;this._textEditChanges=Object.create(null),d!==void 0?(this._workspaceEdit=d,d.documentChanges?(this._changeAnnotations=new In(d.changeAnnotations),d.changeAnnotations=this._changeAnnotations.all(),d.documentChanges.forEach(function(a){if(Rt.is(a)){var o=new xt(a.edits,f._changeAnnotations);f._textEditChanges[a.textDocument.uri]=o}})):d.changes&&Object.keys(d.changes).forEach(function(a){var o=new xt(d.changes[a]);f._textEditChanges[a]=o})):this._workspaceEdit={}}return Object.defineProperty(s.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),s.prototype.getTextEditChange=function(d){if(wt.is(d)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f={uri:d.uri,version:d.version},a=this._textEditChanges[f.uri];if(!a){var o=[],g={textDocument:f,edits:o};this._workspaceEdit.documentChanges.push(g),a=new xt(o,this._changeAnnotations),this._textEditChanges[f.uri]=a}return a}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var a=this._textEditChanges[d];if(!a){var o=[];this._workspaceEdit.changes[d]=o,a=new xt(o),this._textEditChanges[d]=a}return a}},s.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new In,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},s.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},s.prototype.createFile=function(d,f,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Y.is(f)||oe.is(f)?o=f:a=f;var g,D;if(o===void 0?g=st.create(d,a):(D=oe.is(o)?o:this._changeAnnotations.manage(o),g=st.create(d,a,D)),this._workspaceEdit.documentChanges.push(g),D!==void 0)return D},s.prototype.renameFile=function(d,f,a,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var g;Y.is(a)||oe.is(a)?g=a:o=a;var D,I;if(g===void 0?D=at.create(d,f,o):(I=oe.is(g)?g:this._changeAnnotations.manage(g),D=at.create(d,f,o,I)),this._workspaceEdit.documentChanges.push(D),I!==void 0)return I},s.prototype.deleteFile=function(d,f,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Y.is(f)||oe.is(f)?o=f:a=f;var g,D;if(o===void 0?g=Te.create(d,a):(D=oe.is(o)?o:this._changeAnnotations.manage(o),g=Te.create(d,a,D)),this._workspaceEdit.documentChanges.push(g),D!==void 0)return D},s}();t.WorkspaceChange=Ci;var Fn;(function(s){function d(a){return{uri:a}}s.create=d;function f(a){var o=a;return p.defined(o)&&p.string(o.uri)}s.is=f})(Fn||(t.TextDocumentIdentifier=Fn={}));var dn;(function(s){function d(a,o){return{uri:a,version:o}}s.create=d;function f(a){var o=a;return p.defined(o)&&p.string(o.uri)&&p.integer(o.version)}s.is=f})(dn||(t.VersionedTextDocumentIdentifier=dn={}));var wt;(function(s){function d(a,o){return{uri:a,version:o}}s.create=d;function f(a){var o=a;return p.defined(o)&&p.string(o.uri)&&(o.version===null||p.integer(o.version))}s.is=f})(wt||(t.OptionalVersionedTextDocumentIdentifier=wt={}));var Ze;(function(s){function d(a,o,g,D){return{uri:a,languageId:o,version:g,text:D}}s.create=d;function f(a){var o=a;return p.defined(o)&&p.string(o.uri)&&p.string(o.languageId)&&p.integer(o.version)&&p.string(o.text)}s.is=f})(Ze||(t.TextDocumentItem=Ze={}));var It;(function(s){s.PlainText="plaintext",s.Markdown="markdown";function d(f){var a=f;return a===s.PlainText||a===s.Markdown}s.is=d})(It||(t.MarkupKind=It={}));var Tt;(function(s){function d(f){var a=f;return p.objectLiteral(f)&&It.is(a.kind)&&p.string(a.value)}s.is=d})(Tt||(t.MarkupContent=Tt={}));var Ln;(function(s){s.Text=1,s.Method=2,s.Function=3,s.Constructor=4,s.Field=5,s.Variable=6,s.Class=7,s.Interface=8,s.Module=9,s.Property=10,s.Unit=11,s.Value=12,s.Enum=13,s.Keyword=14,s.Snippet=15,s.Color=16,s.File=17,s.Reference=18,s.Folder=19,s.EnumMember=20,s.Constant=21,s.Struct=22,s.Event=23,s.Operator=24,s.TypeParameter=25})(Ln||(t.CompletionItemKind=Ln={}));var fn;(function(s){s.PlainText=1,s.Snippet=2})(fn||(t.InsertTextFormat=fn={}));var hn;(function(s){s.Deprecated=1})(hn||(t.CompletionItemTag=hn={}));var An;(function(s){function d(a,o,g){return{newText:a,insert:o,replace:g}}s.create=d;function f(a){var o=a;return o&&p.string(o.newText)&&_.is(o.insert)&&_.is(o.replace)}s.is=f})(An||(t.InsertReplaceEdit=An={}));var Wn;(function(s){s.asIs=1,s.adjustIndentation=2})(Wn||(t.InsertTextMode=Wn={}));var Hn;(function(s){function d(f){var a=f;return a&&(p.string(a.detail)||a.detail===void 0)&&(p.string(a.description)||a.description===void 0)}s.is=d})(Hn||(t.CompletionItemLabelDetails=Hn={}));var $n;(function(s){function d(f){return{label:f}}s.create=d})($n||(t.CompletionItem=$n={}));var Un;(function(s){function d(f,a){return{items:f||[],isIncomplete:!!a}}s.create=d})(Un||(t.CompletionList=Un={}));var Ft;(function(s){function d(a){return a.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s.fromPlainText=d;function f(a){var o=a;return p.string(o)||p.objectLiteral(o)&&p.string(o.language)&&p.string(o.value)}s.is=f})(Ft||(t.MarkedString=Ft={}));var He;(function(s){function d(f){var a=f;return!!a&&p.objectLiteral(a)&&(Tt.is(a.contents)||Ft.is(a.contents)||p.typedArray(a.contents,Ft.is))&&(f.range===void 0||_.is(f.range))}s.is=d})(He||(t.Hover=He={}));var zn;(function(s){function d(f,a){return a?{label:f,documentation:a}:{label:f}}s.create=d})(zn||(t.ParameterInformation=zn={}));var Vn;(function(s){function d(f,a){for(var o=[],g=2;g<arguments.length;g++)o[g-2]=arguments[g];var D={label:f};return p.defined(a)&&(D.documentation=a),p.defined(o)?D.parameters=o:D.parameters=[],D}s.create=d})(Vn||(t.SignatureInformation=Vn={}));var Pt;(function(s){s.Text=1,s.Read=2,s.Write=3})(Pt||(t.DocumentHighlightKind=Pt={}));var Bn;(function(s){function d(f,a){var o={range:f};return p.number(a)&&(o.kind=a),o}s.create=d})(Bn||(t.DocumentHighlight=Bn={}));var Lt;(function(s){s.File=1,s.Module=2,s.Namespace=3,s.Package=4,s.Class=5,s.Method=6,s.Property=7,s.Field=8,s.Constructor=9,s.Enum=10,s.Interface=11,s.Function=12,s.Variable=13,s.Constant=14,s.String=15,s.Number=16,s.Boolean=17,s.Array=18,s.Object=19,s.Key=20,s.Null=21,s.EnumMember=22,s.Struct=23,s.Event=24,s.Operator=25,s.TypeParameter=26})(Lt||(t.SymbolKind=Lt={}));var Jn;(function(s){s.Deprecated=1})(Jn||(t.SymbolTag=Jn={}));var et;(function(s){function d(f,a,o,g,D){var I={name:f,kind:a,location:{uri:g,range:o}};return D&&(I.containerName=D),I}s.create=d})(et||(t.SymbolInformation=et={}));var ct;(function(s){function d(f,a,o,g){return g!==void 0?{name:f,kind:a,location:{uri:o,range:g}}:{name:f,kind:a,location:{uri:o}}}s.create=d})(ct||(t.WorkspaceSymbol=ct={}));var Gn;(function(s){function d(a,o,g,D,I,ae){var K={name:a,detail:o,kind:g,range:D,selectionRange:I};return ae!==void 0&&(K.children=ae),K}s.create=d;function f(a){var o=a;return o&&p.string(o.name)&&p.number(o.kind)&&_.is(o.range)&&_.is(o.selectionRange)&&(o.detail===void 0||p.string(o.detail))&&(o.deprecated===void 0||p.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}s.is=f})(Gn||(t.DocumentSymbol=Gn={}));var Xn;(function(s){s.Empty="",s.QuickFix="quickfix",s.Refactor="refactor",s.RefactorExtract="refactor.extract",s.RefactorInline="refactor.inline",s.RefactorRewrite="refactor.rewrite",s.Source="source",s.SourceOrganizeImports="source.organizeImports",s.SourceFixAll="source.fixAll"})(Xn||(t.CodeActionKind=Xn={}));var Ge;(function(s){s.Invoked=1,s.Automatic=2})(Ge||(t.CodeActionTriggerKind=Ge={}));var gn;(function(s){function d(a,o,g){var D={diagnostics:a};return o!=null&&(D.only=o),g!=null&&(D.triggerKind=g),D}s.create=d;function f(a){var o=a;return p.defined(o)&&p.typedArray(o.diagnostics,m.is)&&(o.only===void 0||p.typedArray(o.only,p.string))&&(o.triggerKind===void 0||o.triggerKind===Ge.Invoked||o.triggerKind===Ge.Automatic)}s.is=f})(gn||(t.CodeActionContext=gn={}));var pn;(function(s){function d(a,o,g){var D={title:a},I=!0;return typeof o=="string"?(I=!1,D.kind=o):w.is(o)?D.command=o:D.edit=o,I&&g!==void 0&&(D.kind=g),D}s.create=d;function f(a){var o=a;return o&&p.string(o.title)&&(o.diagnostics===void 0||p.typedArray(o.diagnostics,m.is))&&(o.kind===void 0||p.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||w.is(o.command))&&(o.isPreferred===void 0||p.boolean(o.isPreferred))&&(o.edit===void 0||jt.is(o.edit))}s.is=f})(pn||(t.CodeAction=pn={}));var At;(function(s){function d(a,o){var g={range:a};return p.defined(o)&&(g.data=o),g}s.create=d;function f(a){var o=a;return p.defined(o)&&_.is(o.range)&&(p.undefined(o.command)||w.is(o.command))}s.is=f})(At||(t.CodeLens=At={}));var mn;(function(s){function d(a,o){return{tabSize:a,insertSpaces:o}}s.create=d;function f(a){var o=a;return p.defined(o)&&p.uinteger(o.tabSize)&&p.boolean(o.insertSpaces)}s.is=f})(mn||(t.FormattingOptions=mn={}));var tt;(function(s){function d(a,o,g){return{range:a,target:o,data:g}}s.create=d;function f(a){var o=a;return p.defined(o)&&_.is(o.range)&&(p.undefined(o.target)||p.string(o.target))}s.is=f})(tt||(t.DocumentLink=tt={}));var l;(function(s){function d(a,o){return{range:a,parent:o}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&_.is(o.range)&&(o.parent===void 0||s.is(o.parent))}s.is=f})(l||(t.SelectionRange=l={}));var b;(function(s){s.namespace="namespace",s.type="type",s.class="class",s.enum="enum",s.interface="interface",s.struct="struct",s.typeParameter="typeParameter",s.parameter="parameter",s.variable="variable",s.property="property",s.enumMember="enumMember",s.event="event",s.function="function",s.method="method",s.macro="macro",s.keyword="keyword",s.modifier="modifier",s.comment="comment",s.string="string",s.number="number",s.regexp="regexp",s.operator="operator",s.decorator="decorator"})(b||(t.SemanticTokenTypes=b={}));var T;(function(s){s.declaration="declaration",s.definition="definition",s.readonly="readonly",s.static="static",s.deprecated="deprecated",s.abstract="abstract",s.async="async",s.modification="modification",s.documentation="documentation",s.defaultLibrary="defaultLibrary"})(T||(t.SemanticTokenModifiers=T={}));var q;(function(s){function d(f){var a=f;return p.objectLiteral(a)&&(a.resultId===void 0||typeof a.resultId=="string")&&Array.isArray(a.data)&&(a.data.length===0||typeof a.data[0]=="number")}s.is=d})(q||(t.SemanticTokens=q={}));var G;(function(s){function d(a,o){return{range:a,text:o}}s.create=d;function f(a){var o=a;return o!=null&&_.is(o.range)&&p.string(o.text)}s.is=f})(G||(t.InlineValueText=G={}));var J;(function(s){function d(a,o,g){return{range:a,variableName:o,caseSensitiveLookup:g}}s.create=d;function f(a){var o=a;return o!=null&&_.is(o.range)&&p.boolean(o.caseSensitiveLookup)&&(p.string(o.variableName)||o.variableName===void 0)}s.is=f})(J||(t.InlineValueVariableLookup=J={}));var ee;(function(s){function d(a,o){return{range:a,expression:o}}s.create=d;function f(a){var o=a;return o!=null&&_.is(o.range)&&(p.string(o.expression)||o.expression===void 0)}s.is=f})(ee||(t.InlineValueEvaluatableExpression=ee={}));var ne;(function(s){function d(a,o){return{frameId:a,stoppedLocation:o}}s.create=d;function f(a){var o=a;return p.defined(o)&&_.is(a.stoppedLocation)}s.is=f})(ne||(t.InlineValueContext=ne={}));var A;(function(s){s.Type=1,s.Parameter=2;function d(f){return f===1||f===2}s.is=d})(A||(t.InlayHintKind=A={}));var X;(function(s){function d(a){return{value:a}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&(o.tooltip===void 0||p.string(o.tooltip)||Tt.is(o.tooltip))&&(o.location===void 0||C.is(o.location))&&(o.command===void 0||w.is(o.command))}s.is=f})(X||(t.InlayHintLabelPart=X={}));var U;(function(s){function d(a,o,g){var D={position:a,label:o};return g!==void 0&&(D.kind=g),D}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&h.is(o.position)&&(p.string(o.label)||p.typedArray(o.label,X.is))&&(o.kind===void 0||A.is(o.kind))&&o.textEdits===void 0||p.typedArray(o.textEdits,L.is)&&(o.tooltip===void 0||p.string(o.tooltip)||Tt.is(o.tooltip))&&(o.paddingLeft===void 0||p.boolean(o.paddingLeft))&&(o.paddingRight===void 0||p.boolean(o.paddingRight))}s.is=f})(U||(t.InlayHint=U={}));var se;(function(s){function d(f){return{kind:"snippet",value:f}}s.createSnippet=d})(se||(t.StringValue=se={}));var me;(function(s){function d(f,a,o,g){return{insertText:f,filterText:a,range:o,command:g}}s.create=d})(me||(t.InlineCompletionItem=me={}));var Me;(function(s){function d(f){return{items:f}}s.create=d})(Me||(t.InlineCompletionList=Me={}));var Qn;(function(s){s.Invoked=0,s.Automatic=1})(Qn||(t.InlineCompletionTriggerKind=Qn={}));var Es;(function(s){function d(f,a){return{range:f,text:a}}s.create=d})(Es||(t.SelectedCompletionInfo=Es={}));var Ns;(function(s){function d(f,a){return{triggerKind:f,selectedCompletionInfo:a}}s.create=d})(Ns||(t.InlineCompletionContext=Ns={}));var js;(function(s){function d(f){var a=f;return p.objectLiteral(a)&&r.is(a.uri)&&p.string(a.name)}s.is=d})(js||(t.WorkspaceFolder=js={})),t.EOL=[`
`,`\r
`,"\r"];var xs;(function(s){function d(g,D,I,ae){return new _d(g,D,I,ae)}s.create=d;function f(g){var D=g;return!!(p.defined(D)&&p.string(D.uri)&&(p.undefined(D.languageId)||p.string(D.languageId))&&p.uinteger(D.lineCount)&&p.func(D.getText)&&p.func(D.positionAt)&&p.func(D.offsetAt))}s.is=f;function a(g,D){for(var I=g.getText(),ae=o(D,function(Wt,Yn){var Is=Wt.range.start.line-Yn.range.start.line;return Is===0?Wt.range.start.character-Yn.range.start.character:Is}),K=I.length,$e=ae.length-1;$e>=0;$e--){var Ue=ae[$e],nt=g.offsetAt(Ue.range.start),W=g.offsetAt(Ue.range.end);if(W<=K)I=I.substring(0,nt)+Ue.newText+I.substring(W,I.length);else throw new Error("Overlapping edit");K=nt}return I}s.applyEdits=a;function o(g,D){if(g.length<=1)return g;var I=g.length/2|0,ae=g.slice(0,I),K=g.slice(I);o(ae,D),o(K,D);for(var $e=0,Ue=0,nt=0;$e<ae.length&&Ue<K.length;){var W=D(ae[$e],K[Ue]);W<=0?g[nt++]=ae[$e++]:g[nt++]=K[Ue++]}for(;$e<ae.length;)g[nt++]=ae[$e++];for(;Ue<K.length;)g[nt++]=K[Ue++];return g}})(xs||(t.TextDocument=xs={}));var _d=function(){function s(d,f,a,o){this._uri=d,this._languageId=f,this._version=a,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(s.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),s.prototype.getText=function(d){if(d){var f=this.offsetAt(d.start),a=this.offsetAt(d.end);return this._content.substring(f,a)}return this._content},s.prototype.update=function(d,f){this._content=d.text,this._version=f,this._lineOffsets=void 0},s.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var d=[],f=this._content,a=!0,o=0;o<f.length;o++){a&&(d.push(o),a=!1);var g=f.charAt(o);a=g==="\r"||g===`
`,g==="\r"&&o+1<f.length&&f.charAt(o+1)===`
`&&o++}a&&f.length>0&&d.push(f.length),this._lineOffsets=d}return this._lineOffsets},s.prototype.positionAt=function(d){d=Math.max(Math.min(d,this._content.length),0);var f=this.getLineOffsets(),a=0,o=f.length;if(o===0)return h.create(0,d);for(;a<o;){var g=Math.floor((a+o)/2);f[g]>d?o=g:a=g+1}var D=a-1;return h.create(D,d-f[D])},s.prototype.offsetAt=function(d){var f=this.getLineOffsets();if(d.line>=f.length)return this._content.length;if(d.line<0)return 0;var a=f[d.line],o=d.line+1<f.length?f[d.line+1]:this._content.length;return Math.max(Math.min(a+d.character,o),a)},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),s}(),p;(function(s){var d=Object.prototype.toString;function f(W){return typeof W<"u"}s.defined=f;function a(W){return typeof W>"u"}s.undefined=a;function o(W){return W===!0||W===!1}s.boolean=o;function g(W){return d.call(W)==="[object String]"}s.string=g;function D(W){return d.call(W)==="[object Number]"}s.number=D;function I(W,Wt,Yn){return d.call(W)==="[object Number]"&&Wt<=W&&W<=Yn}s.numberRange=I;function ae(W){return d.call(W)==="[object Number]"&&-2147483648<=W&&W<=2147483647}s.integer=ae;function K(W){return d.call(W)==="[object Number]"&&0<=W&&W<=2147483647}s.uinteger=K;function $e(W){return d.call(W)==="[object Function]"}s.func=$e;function Ue(W){return W!==null&&typeof W=="object"}s.objectLiteral=Ue;function nt(W,Wt){return Array.isArray(W)&&W.every(Wt)}s.typedArray=nt})(p||(p={}))})});var re=k(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.ProtocolNotificationType=Ce.ProtocolNotificationType0=Ce.ProtocolRequestType=Ce.ProtocolRequestType0=Ce.RegistrationType=Ce.MessageDirection=void 0;var Xt=qt(),va;(function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both"})(va||(Ce.MessageDirection=va={}));var Ao=class{constructor(t){this.method=t}};Ce.RegistrationType=Ao;var Wo=class extends Xt.RequestType0{constructor(t){super(t)}};Ce.ProtocolRequestType0=Wo;var Ho=class extends Xt.RequestType{constructor(t){super(t,Xt.ParameterStructures.byName)}};Ce.ProtocolRequestType=Ho;var $o=class extends Xt.NotificationType0{constructor(t){super(t)}};Ce.ProtocolNotificationType0=$o;var Uo=class extends Xt.NotificationType{constructor(t){super(t,Xt.ParameterStructures.byName)}};Ce.ProtocolNotificationType=Uo});var Rr=k(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.objectLiteral=he.typedArray=he.stringArray=he.array=he.func=he.error=he.number=he.string=he.boolean=void 0;function ff(e){return e===!0||e===!1}he.boolean=ff;function ba(e){return typeof e=="string"||e instanceof String}he.string=ba;function hf(e){return typeof e=="number"||e instanceof Number}he.number=hf;function gf(e){return e instanceof Error}he.error=gf;function pf(e){return typeof e=="function"}he.func=pf;function Da(e){return Array.isArray(e)}he.array=Da;function mf(e){return Da(e)&&e.every(t=>ba(t))}he.stringArray=mf;function yf(e,t){return Array.isArray(e)&&e.every(t)}he.typedArray=yf;function _f(e){return e!==null&&typeof e=="object"}he.objectLiteral=_f});var Ta=k(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.ImplementationRequest=void 0;var Ra=re(),wa;(function(e){e.method="textDocument/implementation",e.messageDirection=Ra.MessageDirection.clientToServer,e.type=new Ra.ProtocolRequestType(e.method)})(wa||(wr.ImplementationRequest=wa={}))});var Sa=k(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.TypeDefinitionRequest=void 0;var Pa=re(),Ca;(function(e){e.method="textDocument/typeDefinition",e.messageDirection=Pa.MessageDirection.clientToServer,e.type=new Pa.ProtocolRequestType(e.method)})(Ca||(Tr.TypeDefinitionRequest=Ca={}))});var Oa=k(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.DidChangeWorkspaceFoldersNotification=Qt.WorkspaceFoldersRequest=void 0;var Pr=re(),ka;(function(e){e.method="workspace/workspaceFolders",e.messageDirection=Pr.MessageDirection.serverToClient,e.type=new Pr.ProtocolRequestType0(e.method)})(ka||(Qt.WorkspaceFoldersRequest=ka={}));var qa;(function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=Pr.MessageDirection.clientToServer,e.type=new Pr.ProtocolNotificationType(e.method)})(qa||(Qt.DidChangeWorkspaceFoldersNotification=qa={}))});var Na=k(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.ConfigurationRequest=void 0;var Ma=re(),Ea;(function(e){e.method="workspace/configuration",e.messageDirection=Ma.MessageDirection.serverToClient,e.type=new Ma.ProtocolRequestType(e.method)})(Ea||(Cr.ConfigurationRequest=Ea={}))});var Ia=k(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.ColorPresentationRequest=Yt.DocumentColorRequest=void 0;var Sr=re(),ja;(function(e){e.method="textDocument/documentColor",e.messageDirection=Sr.MessageDirection.clientToServer,e.type=new Sr.ProtocolRequestType(e.method)})(ja||(Yt.DocumentColorRequest=ja={}));var xa;(function(e){e.method="textDocument/colorPresentation",e.messageDirection=Sr.MessageDirection.clientToServer,e.type=new Sr.ProtocolRequestType(e.method)})(xa||(Yt.ColorPresentationRequest=xa={}))});var Aa=k(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.FoldingRangeRefreshRequest=Kt.FoldingRangeRequest=void 0;var kr=re(),Fa;(function(e){e.method="textDocument/foldingRange",e.messageDirection=kr.MessageDirection.clientToServer,e.type=new kr.ProtocolRequestType(e.method)})(Fa||(Kt.FoldingRangeRequest=Fa={}));var La;(function(e){e.method="workspace/foldingRange/refresh",e.messageDirection=kr.MessageDirection.serverToClient,e.type=new kr.ProtocolRequestType0(e.method)})(La||(Kt.FoldingRangeRefreshRequest=La={}))});var $a=k(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.DeclarationRequest=void 0;var Wa=re(),Ha;(function(e){e.method="textDocument/declaration",e.messageDirection=Wa.MessageDirection.clientToServer,e.type=new Wa.ProtocolRequestType(e.method)})(Ha||(qr.DeclarationRequest=Ha={}))});var Va=k(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.SelectionRangeRequest=void 0;var Ua=re(),za;(function(e){e.method="textDocument/selectionRange",e.messageDirection=Ua.MessageDirection.clientToServer,e.type=new Ua.ProtocolRequestType(e.method)})(za||(Or.SelectionRangeRequest=za={}))});var Xa=k(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.WorkDoneProgressCancelNotification=ht.WorkDoneProgressCreateRequest=ht.WorkDoneProgress=void 0;var vf=qt(),Mr=re(),Ba;(function(e){e.type=new vf.ProgressType;function t(n){return n===e.type}e.is=t})(Ba||(ht.WorkDoneProgress=Ba={}));var Ja;(function(e){e.method="window/workDoneProgress/create",e.messageDirection=Mr.MessageDirection.serverToClient,e.type=new Mr.ProtocolRequestType(e.method)})(Ja||(ht.WorkDoneProgressCreateRequest=Ja={}));var Ga;(function(e){e.method="window/workDoneProgress/cancel",e.messageDirection=Mr.MessageDirection.clientToServer,e.type=new Mr.ProtocolNotificationType(e.method)})(Ga||(ht.WorkDoneProgressCancelNotification=Ga={}))});var Za=k(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.CallHierarchyOutgoingCallsRequest=gt.CallHierarchyIncomingCallsRequest=gt.CallHierarchyPrepareRequest=void 0;var Zt=re(),Qa;(function(e){e.method="textDocument/prepareCallHierarchy",e.messageDirection=Zt.MessageDirection.clientToServer,e.type=new Zt.ProtocolRequestType(e.method)})(Qa||(gt.CallHierarchyPrepareRequest=Qa={}));var Ya;(function(e){e.method="callHierarchy/incomingCalls",e.messageDirection=Zt.MessageDirection.clientToServer,e.type=new Zt.ProtocolRequestType(e.method)})(Ya||(gt.CallHierarchyIncomingCallsRequest=Ya={}));var Ka;(function(e){e.method="callHierarchy/outgoingCalls",e.messageDirection=Zt.MessageDirection.clientToServer,e.type=new Zt.ProtocolRequestType(e.method)})(Ka||(gt.CallHierarchyOutgoingCallsRequest=Ka={}))});var oc=k(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.SemanticTokensRefreshRequest=Se.SemanticTokensRangeRequest=Se.SemanticTokensDeltaRequest=Se.SemanticTokensRequest=Se.SemanticTokensRegistrationType=Se.TokenFormat=void 0;var it=re(),ec;(function(e){e.Relative="relative"})(ec||(Se.TokenFormat=ec={}));var wn;(function(e){e.method="textDocument/semanticTokens",e.type=new it.RegistrationType(e.method)})(wn||(Se.SemanticTokensRegistrationType=wn={}));var tc;(function(e){e.method="textDocument/semanticTokens/full",e.messageDirection=it.MessageDirection.clientToServer,e.type=new it.ProtocolRequestType(e.method),e.registrationMethod=wn.method})(tc||(Se.SemanticTokensRequest=tc={}));var nc;(function(e){e.method="textDocument/semanticTokens/full/delta",e.messageDirection=it.MessageDirection.clientToServer,e.type=new it.ProtocolRequestType(e.method),e.registrationMethod=wn.method})(nc||(Se.SemanticTokensDeltaRequest=nc={}));var rc;(function(e){e.method="textDocument/semanticTokens/range",e.messageDirection=it.MessageDirection.clientToServer,e.type=new it.ProtocolRequestType(e.method),e.registrationMethod=wn.method})(rc||(Se.SemanticTokensRangeRequest=rc={}));var ic;(function(e){e.method="workspace/semanticTokens/refresh",e.messageDirection=it.MessageDirection.serverToClient,e.type=new it.ProtocolRequestType0(e.method)})(ic||(Se.SemanticTokensRefreshRequest=ic={}))});var cc=k(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.ShowDocumentRequest=void 0;var sc=re(),ac;(function(e){e.method="window/showDocument",e.messageDirection=sc.MessageDirection.serverToClient,e.type=new sc.ProtocolRequestType(e.method)})(ac||(Er.ShowDocumentRequest=ac={}))});var dc=k(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.LinkedEditingRangeRequest=void 0;var uc=re(),lc;(function(e){e.method="textDocument/linkedEditingRange",e.messageDirection=uc.MessageDirection.clientToServer,e.type=new uc.ProtocolRequestType(e.method)})(lc||(Nr.LinkedEditingRangeRequest=lc={}))});var vc=k(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.WillDeleteFilesRequest=De.DidDeleteFilesNotification=De.DidRenameFilesNotification=De.WillRenameFilesRequest=De.DidCreateFilesNotification=De.WillCreateFilesRequest=De.FileOperationPatternKind=void 0;var je=re(),fc;(function(e){e.file="file",e.folder="folder"})(fc||(De.FileOperationPatternKind=fc={}));var hc;(function(e){e.method="workspace/willCreateFiles",e.messageDirection=je.MessageDirection.clientToServer,e.type=new je.ProtocolRequestType(e.method)})(hc||(De.WillCreateFilesRequest=hc={}));var gc;(function(e){e.method="workspace/didCreateFiles",e.messageDirection=je.MessageDirection.clientToServer,e.type=new je.ProtocolNotificationType(e.method)})(gc||(De.DidCreateFilesNotification=gc={}));var pc;(function(e){e.method="workspace/willRenameFiles",e.messageDirection=je.MessageDirection.clientToServer,e.type=new je.ProtocolRequestType(e.method)})(pc||(De.WillRenameFilesRequest=pc={}));var mc;(function(e){e.method="workspace/didRenameFiles",e.messageDirection=je.MessageDirection.clientToServer,e.type=new je.ProtocolNotificationType(e.method)})(mc||(De.DidRenameFilesNotification=mc={}));var yc;(function(e){e.method="workspace/didDeleteFiles",e.messageDirection=je.MessageDirection.clientToServer,e.type=new je.ProtocolNotificationType(e.method)})(yc||(De.DidDeleteFilesNotification=yc={}));var _c;(function(e){e.method="workspace/willDeleteFiles",e.messageDirection=je.MessageDirection.clientToServer,e.type=new je.ProtocolRequestType(e.method)})(_c||(De.WillDeleteFilesRequest=_c={}))});var Tc=k(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.MonikerRequest=pt.MonikerKind=pt.UniquenessLevel=void 0;var bc=re(),Dc;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"})(Dc||(pt.UniquenessLevel=Dc={}));var Rc;(function(e){e.$import="import",e.$export="export",e.local="local"})(Rc||(pt.MonikerKind=Rc={}));var wc;(function(e){e.method="textDocument/moniker",e.messageDirection=bc.MessageDirection.clientToServer,e.type=new bc.ProtocolRequestType(e.method)})(wc||(pt.MonikerRequest=wc={}))});var kc=k(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.TypeHierarchySubtypesRequest=mt.TypeHierarchySupertypesRequest=mt.TypeHierarchyPrepareRequest=void 0;var en=re(),Pc;(function(e){e.method="textDocument/prepareTypeHierarchy",e.messageDirection=en.MessageDirection.clientToServer,e.type=new en.ProtocolRequestType(e.method)})(Pc||(mt.TypeHierarchyPrepareRequest=Pc={}));var Cc;(function(e){e.method="typeHierarchy/supertypes",e.messageDirection=en.MessageDirection.clientToServer,e.type=new en.ProtocolRequestType(e.method)})(Cc||(mt.TypeHierarchySupertypesRequest=Cc={}));var Sc;(function(e){e.method="typeHierarchy/subtypes",e.messageDirection=en.MessageDirection.clientToServer,e.type=new en.ProtocolRequestType(e.method)})(Sc||(mt.TypeHierarchySubtypesRequest=Sc={}))});var Mc=k(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.InlineValueRefreshRequest=tn.InlineValueRequest=void 0;var jr=re(),qc;(function(e){e.method="textDocument/inlineValue",e.messageDirection=jr.MessageDirection.clientToServer,e.type=new jr.ProtocolRequestType(e.method)})(qc||(tn.InlineValueRequest=qc={}));var Oc;(function(e){e.method="workspace/inlineValue/refresh",e.messageDirection=jr.MessageDirection.serverToClient,e.type=new jr.ProtocolRequestType0(e.method)})(Oc||(tn.InlineValueRefreshRequest=Oc={}))});var xc=k(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.InlayHintRefreshRequest=yt.InlayHintResolveRequest=yt.InlayHintRequest=void 0;var nn=re(),Ec;(function(e){e.method="textDocument/inlayHint",e.messageDirection=nn.MessageDirection.clientToServer,e.type=new nn.ProtocolRequestType(e.method)})(Ec||(yt.InlayHintRequest=Ec={}));var Nc;(function(e){e.method="inlayHint/resolve",e.messageDirection=nn.MessageDirection.clientToServer,e.type=new nn.ProtocolRequestType(e.method)})(Nc||(yt.InlayHintResolveRequest=Nc={}));var jc;(function(e){e.method="workspace/inlayHint/refresh",e.messageDirection=nn.MessageDirection.serverToClient,e.type=new nn.ProtocolRequestType0(e.method)})(jc||(yt.InlayHintRefreshRequest=jc={}))});var $c=k(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.DiagnosticRefreshRequest=xe.WorkspaceDiagnosticRequest=xe.DocumentDiagnosticRequest=xe.DocumentDiagnosticReportKind=xe.DiagnosticServerCancellationData=void 0;var Hc=qt(),bf=Rr(),rn=re(),Ic;(function(e){function t(n){let r=n;return r&&bf.boolean(r.retriggerRequest)}e.is=t})(Ic||(xe.DiagnosticServerCancellationData=Ic={}));var Fc;(function(e){e.Full="full",e.Unchanged="unchanged"})(Fc||(xe.DocumentDiagnosticReportKind=Fc={}));var Lc;(function(e){e.method="textDocument/diagnostic",e.messageDirection=rn.MessageDirection.clientToServer,e.type=new rn.ProtocolRequestType(e.method),e.partialResult=new Hc.ProgressType})(Lc||(xe.DocumentDiagnosticRequest=Lc={}));var Ac;(function(e){e.method="workspace/diagnostic",e.messageDirection=rn.MessageDirection.clientToServer,e.type=new rn.ProtocolRequestType(e.method),e.partialResult=new Hc.ProgressType})(Ac||(xe.WorkspaceDiagnosticRequest=Ac={}));var Wc;(function(e){e.method="workspace/diagnostic/refresh",e.messageDirection=rn.MessageDirection.serverToClient,e.type=new rn.ProtocolRequestType0(e.method)})(Wc||(xe.DiagnosticRefreshRequest=Wc={}))});var Xc=k(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.DidCloseNotebookDocumentNotification=ce.DidSaveNotebookDocumentNotification=ce.DidChangeNotebookDocumentNotification=ce.NotebookCellArrayChange=ce.DidOpenNotebookDocumentNotification=ce.NotebookDocumentSyncRegistrationType=ce.NotebookDocument=ce.NotebookCell=ce.ExecutionSummary=ce.NotebookCellKind=void 0;var Tn=Dr(),Ve=Rr(),Xe=re(),zo;(function(e){e.Markup=1,e.Code=2;function t(n){return n===1||n===2}e.is=t})(zo||(ce.NotebookCellKind=zo={}));var Vo;(function(e){function t(i,u){let h={executionOrder:i};return(u===!0||u===!1)&&(h.success=u),h}e.create=t;function n(i){let u=i;return Ve.objectLiteral(u)&&Tn.uinteger.is(u.executionOrder)&&(u.success===void 0||Ve.boolean(u.success))}e.is=n;function r(i,u){return i===u?!0:i==null||u===null||u===void 0?!1:i.executionOrder===u.executionOrder&&i.success===u.success}e.equals=r})(Vo||(ce.ExecutionSummary=Vo={}));var xr;(function(e){function t(u,h){return{kind:u,document:h}}e.create=t;function n(u){let h=u;return Ve.objectLiteral(h)&&zo.is(h.kind)&&Tn.DocumentUri.is(h.document)&&(h.metadata===void 0||Ve.objectLiteral(h.metadata))}e.is=n;function r(u,h){let _=new Set;return u.document!==h.document&&_.add("document"),u.kind!==h.kind&&_.add("kind"),u.executionSummary!==h.executionSummary&&_.add("executionSummary"),(u.metadata!==void 0||h.metadata!==void 0)&&!i(u.metadata,h.metadata)&&_.add("metadata"),(u.executionSummary!==void 0||h.executionSummary!==void 0)&&!Vo.equals(u.executionSummary,h.executionSummary)&&_.add("executionSummary"),_}e.diff=r;function i(u,h){if(u===h)return!0;if(u==null||h===null||h===void 0||typeof u!=typeof h||typeof u!="object")return!1;let _=Array.isArray(u),C=Array.isArray(h);if(_!==C)return!1;if(_&&C){if(u.length!==h.length)return!1;for(let S=0;S<u.length;S++)if(!i(u[S],h[S]))return!1}if(Ve.objectLiteral(u)&&Ve.objectLiteral(h)){let S=Object.keys(u),O=Object.keys(h);if(S.length!==O.length||(S.sort(),O.sort(),!i(S,O)))return!1;for(let N=0;N<S.length;N++){let j=S[N];if(!i(u[j],h[j]))return!1}}return!0}})(xr||(ce.NotebookCell=xr={}));var Uc;(function(e){function t(r,i,u,h){return{uri:r,notebookType:i,version:u,cells:h}}e.create=t;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.string(i.uri)&&Tn.integer.is(i.version)&&Ve.typedArray(i.cells,xr.is)}e.is=n})(Uc||(ce.NotebookDocument=Uc={}));var on;(function(e){e.method="notebookDocument/sync",e.messageDirection=Xe.MessageDirection.clientToServer,e.type=new Xe.RegistrationType(e.method)})(on||(ce.NotebookDocumentSyncRegistrationType=on={}));var zc;(function(e){e.method="notebookDocument/didOpen",e.messageDirection=Xe.MessageDirection.clientToServer,e.type=new Xe.ProtocolNotificationType(e.method),e.registrationMethod=on.method})(zc||(ce.DidOpenNotebookDocumentNotification=zc={}));var Vc;(function(e){function t(r){let i=r;return Ve.objectLiteral(i)&&Tn.uinteger.is(i.start)&&Tn.uinteger.is(i.deleteCount)&&(i.cells===void 0||Ve.typedArray(i.cells,xr.is))}e.is=t;function n(r,i,u){let h={start:r,deleteCount:i};return u!==void 0&&(h.cells=u),h}e.create=n})(Vc||(ce.NotebookCellArrayChange=Vc={}));var Bc;(function(e){e.method="notebookDocument/didChange",e.messageDirection=Xe.MessageDirection.clientToServer,e.type=new Xe.ProtocolNotificationType(e.method),e.registrationMethod=on.method})(Bc||(ce.DidChangeNotebookDocumentNotification=Bc={}));var Jc;(function(e){e.method="notebookDocument/didSave",e.messageDirection=Xe.MessageDirection.clientToServer,e.type=new Xe.ProtocolNotificationType(e.method),e.registrationMethod=on.method})(Jc||(ce.DidSaveNotebookDocumentNotification=Jc={}));var Gc;(function(e){e.method="notebookDocument/didClose",e.messageDirection=Xe.MessageDirection.clientToServer,e.type=new Xe.ProtocolNotificationType(e.method),e.registrationMethod=on.method})(Gc||(ce.DidCloseNotebookDocumentNotification=Gc={}))});var Kc=k(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.InlineCompletionRequest=void 0;var Qc=re(),Yc;(function(e){e.method="textDocument/inlineCompletion",e.messageDirection=Qc.MessageDirection.clientToServer,e.type=new Qc.ProtocolRequestType(e.method)})(Yc||(Ir.InlineCompletionRequest=Yc={}))});var dl=k(c=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.WorkspaceSymbolRequest=c.CodeActionResolveRequest=c.CodeActionRequest=c.DocumentSymbolRequest=c.DocumentHighlightRequest=c.ReferencesRequest=c.DefinitionRequest=c.SignatureHelpRequest=c.SignatureHelpTriggerKind=c.HoverRequest=c.CompletionResolveRequest=c.CompletionRequest=c.CompletionTriggerKind=c.PublishDiagnosticsNotification=c.WatchKind=c.RelativePattern=c.FileChangeType=c.DidChangeWatchedFilesNotification=c.WillSaveTextDocumentWaitUntilRequest=c.WillSaveTextDocumentNotification=c.TextDocumentSaveReason=c.DidSaveTextDocumentNotification=c.DidCloseTextDocumentNotification=c.DidChangeTextDocumentNotification=c.TextDocumentContentChangeEvent=c.DidOpenTextDocumentNotification=c.TextDocumentSyncKind=c.TelemetryEventNotification=c.LogMessageNotification=c.ShowMessageRequest=c.ShowMessageNotification=c.MessageType=c.DidChangeConfigurationNotification=c.ExitNotification=c.ShutdownRequest=c.InitializedNotification=c.InitializeErrorCodes=c.InitializeRequest=c.WorkDoneProgressOptions=c.TextDocumentRegistrationOptions=c.StaticRegistrationOptions=c.PositionEncodingKind=c.FailureHandlingKind=c.ResourceOperationKind=c.UnregistrationRequest=c.RegistrationRequest=c.DocumentSelector=c.NotebookCellTextDocumentFilter=c.NotebookDocumentFilter=c.TextDocumentFilter=void 0;c.MonikerRequest=c.MonikerKind=c.UniquenessLevel=c.WillDeleteFilesRequest=c.DidDeleteFilesNotification=c.WillRenameFilesRequest=c.DidRenameFilesNotification=c.WillCreateFilesRequest=c.DidCreateFilesNotification=c.FileOperationPatternKind=c.LinkedEditingRangeRequest=c.ShowDocumentRequest=c.SemanticTokensRegistrationType=c.SemanticTokensRefreshRequest=c.SemanticTokensRangeRequest=c.SemanticTokensDeltaRequest=c.SemanticTokensRequest=c.TokenFormat=c.CallHierarchyPrepareRequest=c.CallHierarchyOutgoingCallsRequest=c.CallHierarchyIncomingCallsRequest=c.WorkDoneProgressCancelNotification=c.WorkDoneProgressCreateRequest=c.WorkDoneProgress=c.SelectionRangeRequest=c.DeclarationRequest=c.FoldingRangeRefreshRequest=c.FoldingRangeRequest=c.ColorPresentationRequest=c.DocumentColorRequest=c.ConfigurationRequest=c.DidChangeWorkspaceFoldersNotification=c.WorkspaceFoldersRequest=c.TypeDefinitionRequest=c.ImplementationRequest=c.ApplyWorkspaceEditRequest=c.ExecuteCommandRequest=c.PrepareRenameRequest=c.RenameRequest=c.PrepareSupportDefaultBehavior=c.DocumentOnTypeFormattingRequest=c.DocumentRangesFormattingRequest=c.DocumentRangeFormattingRequest=c.DocumentFormattingRequest=c.DocumentLinkResolveRequest=c.DocumentLinkRequest=c.CodeLensRefreshRequest=c.CodeLensResolveRequest=c.CodeLensRequest=c.WorkspaceSymbolResolveRequest=void 0;c.InlineCompletionRequest=c.DidCloseNotebookDocumentNotification=c.DidSaveNotebookDocumentNotification=c.DidChangeNotebookDocumentNotification=c.NotebookCellArrayChange=c.DidOpenNotebookDocumentNotification=c.NotebookDocumentSyncRegistrationType=c.NotebookDocument=c.NotebookCell=c.ExecutionSummary=c.NotebookCellKind=c.DiagnosticRefreshRequest=c.WorkspaceDiagnosticRequest=c.DocumentDiagnosticRequest=c.DocumentDiagnosticReportKind=c.DiagnosticServerCancellationData=c.InlayHintRefreshRequest=c.InlayHintResolveRequest=c.InlayHintRequest=c.InlineValueRefreshRequest=c.InlineValueRequest=c.TypeHierarchySupertypesRequest=c.TypeHierarchySubtypesRequest=c.TypeHierarchyPrepareRequest=void 0;var R=re(),Zc=Dr(),ye=Rr(),Df=Ta();Object.defineProperty(c,"ImplementationRequest",{enumerable:!0,get:function(){return Df.ImplementationRequest}});var Rf=Sa();Object.defineProperty(c,"TypeDefinitionRequest",{enumerable:!0,get:function(){return Rf.TypeDefinitionRequest}});var al=Oa();Object.defineProperty(c,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return al.WorkspaceFoldersRequest}});Object.defineProperty(c,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return al.DidChangeWorkspaceFoldersNotification}});var wf=Na();Object.defineProperty(c,"ConfigurationRequest",{enumerable:!0,get:function(){return wf.ConfigurationRequest}});var cl=Ia();Object.defineProperty(c,"DocumentColorRequest",{enumerable:!0,get:function(){return cl.DocumentColorRequest}});Object.defineProperty(c,"ColorPresentationRequest",{enumerable:!0,get:function(){return cl.ColorPresentationRequest}});var ul=Aa();Object.defineProperty(c,"FoldingRangeRequest",{enumerable:!0,get:function(){return ul.FoldingRangeRequest}});Object.defineProperty(c,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return ul.FoldingRangeRefreshRequest}});var Tf=$a();Object.defineProperty(c,"DeclarationRequest",{enumerable:!0,get:function(){return Tf.DeclarationRequest}});var Pf=Va();Object.defineProperty(c,"SelectionRangeRequest",{enumerable:!0,get:function(){return Pf.SelectionRangeRequest}});var Qo=Xa();Object.defineProperty(c,"WorkDoneProgress",{enumerable:!0,get:function(){return Qo.WorkDoneProgress}});Object.defineProperty(c,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Qo.WorkDoneProgressCreateRequest}});Object.defineProperty(c,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Qo.WorkDoneProgressCancelNotification}});var Yo=Za();Object.defineProperty(c,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Yo.CallHierarchyIncomingCallsRequest}});Object.defineProperty(c,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Yo.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(c,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Yo.CallHierarchyPrepareRequest}});var sn=oc();Object.defineProperty(c,"TokenFormat",{enumerable:!0,get:function(){return sn.TokenFormat}});Object.defineProperty(c,"SemanticTokensRequest",{enumerable:!0,get:function(){return sn.SemanticTokensRequest}});Object.defineProperty(c,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return sn.SemanticTokensDeltaRequest}});Object.defineProperty(c,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return sn.SemanticTokensRangeRequest}});Object.defineProperty(c,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return sn.SemanticTokensRefreshRequest}});Object.defineProperty(c,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return sn.SemanticTokensRegistrationType}});var Cf=cc();Object.defineProperty(c,"ShowDocumentRequest",{enumerable:!0,get:function(){return Cf.ShowDocumentRequest}});var Sf=dc();Object.defineProperty(c,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return Sf.LinkedEditingRangeRequest}});var Ot=vc();Object.defineProperty(c,"FileOperationPatternKind",{enumerable:!0,get:function(){return Ot.FileOperationPatternKind}});Object.defineProperty(c,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Ot.DidCreateFilesNotification}});Object.defineProperty(c,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Ot.WillCreateFilesRequest}});Object.defineProperty(c,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Ot.DidRenameFilesNotification}});Object.defineProperty(c,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Ot.WillRenameFilesRequest}});Object.defineProperty(c,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Ot.DidDeleteFilesNotification}});Object.defineProperty(c,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Ot.WillDeleteFilesRequest}});var Ko=Tc();Object.defineProperty(c,"UniquenessLevel",{enumerable:!0,get:function(){return Ko.UniquenessLevel}});Object.defineProperty(c,"MonikerKind",{enumerable:!0,get:function(){return Ko.MonikerKind}});Object.defineProperty(c,"MonikerRequest",{enumerable:!0,get:function(){return Ko.MonikerRequest}});var Zo=kc();Object.defineProperty(c,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Zo.TypeHierarchyPrepareRequest}});Object.defineProperty(c,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Zo.TypeHierarchySubtypesRequest}});Object.defineProperty(c,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Zo.TypeHierarchySupertypesRequest}});var ll=Mc();Object.defineProperty(c,"InlineValueRequest",{enumerable:!0,get:function(){return ll.InlineValueRequest}});Object.defineProperty(c,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return ll.InlineValueRefreshRequest}});var es=xc();Object.defineProperty(c,"InlayHintRequest",{enumerable:!0,get:function(){return es.InlayHintRequest}});Object.defineProperty(c,"InlayHintResolveRequest",{enumerable:!0,get:function(){return es.InlayHintResolveRequest}});Object.defineProperty(c,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return es.InlayHintRefreshRequest}});var Pn=$c();Object.defineProperty(c,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Pn.DiagnosticServerCancellationData}});Object.defineProperty(c,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Pn.DocumentDiagnosticReportKind}});Object.defineProperty(c,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Pn.DocumentDiagnosticRequest}});Object.defineProperty(c,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Pn.WorkspaceDiagnosticRequest}});Object.defineProperty(c,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Pn.DiagnosticRefreshRequest}});var Qe=Xc();Object.defineProperty(c,"NotebookCellKind",{enumerable:!0,get:function(){return Qe.NotebookCellKind}});Object.defineProperty(c,"ExecutionSummary",{enumerable:!0,get:function(){return Qe.ExecutionSummary}});Object.defineProperty(c,"NotebookCell",{enumerable:!0,get:function(){return Qe.NotebookCell}});Object.defineProperty(c,"NotebookDocument",{enumerable:!0,get:function(){return Qe.NotebookDocument}});Object.defineProperty(c,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Qe.NotebookDocumentSyncRegistrationType}});Object.defineProperty(c,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Qe.DidOpenNotebookDocumentNotification}});Object.defineProperty(c,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Qe.NotebookCellArrayChange}});Object.defineProperty(c,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Qe.DidChangeNotebookDocumentNotification}});Object.defineProperty(c,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Qe.DidSaveNotebookDocumentNotification}});Object.defineProperty(c,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Qe.DidCloseNotebookDocumentNotification}});var kf=Kc();Object.defineProperty(c,"InlineCompletionRequest",{enumerable:!0,get:function(){return kf.InlineCompletionRequest}});var Bo;(function(e){function t(n){let r=n;return ye.string(r)||ye.string(r.language)||ye.string(r.scheme)||ye.string(r.pattern)}e.is=t})(Bo||(c.TextDocumentFilter=Bo={}));var Jo;(function(e){function t(n){let r=n;return ye.objectLiteral(r)&&(ye.string(r.notebookType)||ye.string(r.scheme)||ye.string(r.pattern))}e.is=t})(Jo||(c.NotebookDocumentFilter=Jo={}));var Go;(function(e){function t(n){let r=n;return ye.objectLiteral(r)&&(ye.string(r.notebook)||Jo.is(r.notebook))&&(r.language===void 0||ye.string(r.language))}e.is=t})(Go||(c.NotebookCellTextDocumentFilter=Go={}));var Xo;(function(e){function t(n){if(!Array.isArray(n))return!1;for(let r of n)if(!ye.string(r)&&!Bo.is(r)&&!Go.is(r))return!1;return!0}e.is=t})(Xo||(c.DocumentSelector=Xo={}));var eu;(function(e){e.method="client/registerCapability",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType(e.method)})(eu||(c.RegistrationRequest=eu={}));var tu;(function(e){e.method="client/unregisterCapability",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType(e.method)})(tu||(c.UnregistrationRequest=tu={}));var nu;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete"})(nu||(c.ResourceOperationKind=nu={}));var ru;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"})(ru||(c.FailureHandlingKind=ru={}));var iu;(function(e){e.UTF8="utf-8",e.UTF16="utf-16",e.UTF32="utf-32"})(iu||(c.PositionEncodingKind=iu={}));var ou;(function(e){function t(n){let r=n;return r&&ye.string(r.id)&&r.id.length>0}e.hasId=t})(ou||(c.StaticRegistrationOptions=ou={}));var su;(function(e){function t(n){let r=n;return r&&(r.documentSelector===null||Xo.is(r.documentSelector))}e.is=t})(su||(c.TextDocumentRegistrationOptions=su={}));var au;(function(e){function t(r){let i=r;return ye.objectLiteral(i)&&(i.workDoneProgress===void 0||ye.boolean(i.workDoneProgress))}e.is=t;function n(r){let i=r;return i&&ye.boolean(i.workDoneProgress)}e.hasWorkDoneProgress=n})(au||(c.WorkDoneProgressOptions=au={}));var cu;(function(e){e.method="initialize",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(cu||(c.InitializeRequest=cu={}));var uu;(function(e){e.unknownProtocolVersion=1})(uu||(c.InitializeErrorCodes=uu={}));var lu;(function(e){e.method="initialized",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(lu||(c.InitializedNotification=lu={}));var du;(function(e){e.method="shutdown",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType0(e.method)})(du||(c.ShutdownRequest=du={}));var fu;(function(e){e.method="exit",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType0(e.method)})(fu||(c.ExitNotification=fu={}));var hu;(function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(hu||(c.DidChangeConfigurationNotification=hu={}));var gu;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5})(gu||(c.MessageType=gu={}));var pu;(function(e){e.method="window/showMessage",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolNotificationType(e.method)})(pu||(c.ShowMessageNotification=pu={}));var mu;(function(e){e.method="window/showMessageRequest",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType(e.method)})(mu||(c.ShowMessageRequest=mu={}));var yu;(function(e){e.method="window/logMessage",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolNotificationType(e.method)})(yu||(c.LogMessageNotification=yu={}));var _u;(function(e){e.method="telemetry/event",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolNotificationType(e.method)})(_u||(c.TelemetryEventNotification=_u={}));var vu;(function(e){e.None=0,e.Full=1,e.Incremental=2})(vu||(c.TextDocumentSyncKind=vu={}));var bu;(function(e){e.method="textDocument/didOpen",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(bu||(c.DidOpenTextDocumentNotification=bu={}));var Du;(function(e){function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}e.isIncremental=t;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}e.isFull=n})(Du||(c.TextDocumentContentChangeEvent=Du={}));var Ru;(function(e){e.method="textDocument/didChange",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(Ru||(c.DidChangeTextDocumentNotification=Ru={}));var wu;(function(e){e.method="textDocument/didClose",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(wu||(c.DidCloseTextDocumentNotification=wu={}));var Tu;(function(e){e.method="textDocument/didSave",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(Tu||(c.DidSaveTextDocumentNotification=Tu={}));var Pu;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(Pu||(c.TextDocumentSaveReason=Pu={}));var Cu;(function(e){e.method="textDocument/willSave",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(Cu||(c.WillSaveTextDocumentNotification=Cu={}));var Su;(function(e){e.method="textDocument/willSaveWaitUntil",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Su||(c.WillSaveTextDocumentWaitUntilRequest=Su={}));var ku;(function(e){e.method="workspace/didChangeWatchedFiles",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(ku||(c.DidChangeWatchedFilesNotification=ku={}));var qu;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(qu||(c.FileChangeType=qu={}));var Ou;(function(e){function t(n){let r=n;return ye.objectLiteral(r)&&(Zc.URI.is(r.baseUri)||Zc.WorkspaceFolder.is(r.baseUri))&&ye.string(r.pattern)}e.is=t})(Ou||(c.RelativePattern=Ou={}));var Mu;(function(e){e.Create=1,e.Change=2,e.Delete=4})(Mu||(c.WatchKind=Mu={}));var Eu;(function(e){e.method="textDocument/publishDiagnostics",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolNotificationType(e.method)})(Eu||(c.PublishDiagnosticsNotification=Eu={}));var Nu;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(Nu||(c.CompletionTriggerKind=Nu={}));var ju;(function(e){e.method="textDocument/completion",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(ju||(c.CompletionRequest=ju={}));var xu;(function(e){e.method="completionItem/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(xu||(c.CompletionResolveRequest=xu={}));var Iu;(function(e){e.method="textDocument/hover",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Iu||(c.HoverRequest=Iu={}));var Fu;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(Fu||(c.SignatureHelpTriggerKind=Fu={}));var Lu;(function(e){e.method="textDocument/signatureHelp",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Lu||(c.SignatureHelpRequest=Lu={}));var Au;(function(e){e.method="textDocument/definition",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Au||(c.DefinitionRequest=Au={}));var Wu;(function(e){e.method="textDocument/references",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Wu||(c.ReferencesRequest=Wu={}));var Hu;(function(e){e.method="textDocument/documentHighlight",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Hu||(c.DocumentHighlightRequest=Hu={}));var $u;(function(e){e.method="textDocument/documentSymbol",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})($u||(c.DocumentSymbolRequest=$u={}));var Uu;(function(e){e.method="textDocument/codeAction",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Uu||(c.CodeActionRequest=Uu={}));var zu;(function(e){e.method="codeAction/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(zu||(c.CodeActionResolveRequest=zu={}));var Vu;(function(e){e.method="workspace/symbol",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Vu||(c.WorkspaceSymbolRequest=Vu={}));var Bu;(function(e){e.method="workspaceSymbol/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Bu||(c.WorkspaceSymbolResolveRequest=Bu={}));var Ju;(function(e){e.method="textDocument/codeLens",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Ju||(c.CodeLensRequest=Ju={}));var Gu;(function(e){e.method="codeLens/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Gu||(c.CodeLensResolveRequest=Gu={}));var Xu;(function(e){e.method="workspace/codeLens/refresh",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType0(e.method)})(Xu||(c.CodeLensRefreshRequest=Xu={}));var Qu;(function(e){e.method="textDocument/documentLink",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Qu||(c.DocumentLinkRequest=Qu={}));var Yu;(function(e){e.method="documentLink/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Yu||(c.DocumentLinkResolveRequest=Yu={}));var Ku;(function(e){e.method="textDocument/formatting",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Ku||(c.DocumentFormattingRequest=Ku={}));var Zu;(function(e){e.method="textDocument/rangeFormatting",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Zu||(c.DocumentRangeFormattingRequest=Zu={}));var el;(function(e){e.method="textDocument/rangesFormatting",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(el||(c.DocumentRangesFormattingRequest=el={}));var tl;(function(e){e.method="textDocument/onTypeFormatting",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(tl||(c.DocumentOnTypeFormattingRequest=tl={}));var nl;(function(e){e.Identifier=1})(nl||(c.PrepareSupportDefaultBehavior=nl={}));var rl;(function(e){e.method="textDocument/rename",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(rl||(c.RenameRequest=rl={}));var il;(function(e){e.method="textDocument/prepareRename",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(il||(c.PrepareRenameRequest=il={}));var ol;(function(e){e.method="workspace/executeCommand",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(ol||(c.ExecuteCommandRequest=ol={}));var sl;(function(e){e.method="workspace/applyEdit",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType("workspace/applyEdit")})(sl||(c.ApplyWorkspaceEditRequest=sl={}))});var hl=k(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.createProtocolConnection=void 0;var fl=qt();function qf(e,t,n,r){return fl.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,fl.createMessageConnection)(e,t,n,r)}Fr.createProtocolConnection=qf});var pl=k(ke=>{"use strict";var Of=ke&&ke.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Lr=ke&&ke.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Of(t,e,n)};Object.defineProperty(ke,"__esModule",{value:!0});ke.LSPErrorCodes=ke.createProtocolConnection=void 0;Lr(qt(),ke);Lr(Dr(),ke);Lr(re(),ke);Lr(dl(),ke);var Mf=hl();Object.defineProperty(ke,"createProtocolConnection",{enumerable:!0,get:function(){return Mf.createProtocolConnection}});var gl;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(gl||(ke.LSPErrorCodes=gl={}))});var le=k(Ye=>{"use strict";var Ef=Ye&&Ye.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),ml=Ye&&Ye.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Ef(t,e,n)};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.createProtocolConnection=void 0;var Nf=Lo();ml(Lo(),Ye);ml(pl(),Ye);function jf(e,t,n,r){return(0,Nf.createMessageConnection)(e,t,n,r)}Ye.createProtocolConnection=jf});var ts=k(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.generateUuid=Ie.parse=Ie.isUUID=Ie.v4=Ie.empty=void 0;var Cn=class{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},Sn=class e extends Cn{static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-","4",e._randomHex(),e._randomHex(),e._randomHex(),"-",e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(""))}};Sn._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Sn._timeHighBits=["8","9","a","b"];Ie.empty=new Cn("00000000-0000-0000-0000-000000000000");function yl(){return new Sn}Ie.v4=yl;var xf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function _l(e){return xf.test(e)}Ie.isUUID=_l;function If(e){if(!_l(e))throw new Error("invalid uuid");return new Cn(e)}Ie.parse=If;function Ff(){return yl().asHex()}Ie.generateUuid=Ff});var vl=k(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.attachPartialResult=vt.ProgressFeature=vt.attachWorkDone=void 0;var _t=le(),Lf=ts(),Mt=class e{constructor(t,n){this._connection=t,this._token=n,e.Instances.set(this._token,this)}begin(t,n,r,i){let u={kind:"begin",title:t,percentage:n,message:r,cancellable:i};this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,u)}report(t,n){let r={kind:"report"};typeof t=="number"?(r.percentage=t,n!==void 0&&(r.message=n)):r.message=t,this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,r)}done(){e.Instances.delete(this._token),this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,{kind:"end"})}};Mt.Instances=new Map;var Ar=class extends Mt{constructor(t,n){super(t,n),this._source=new _t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},kn=class{constructor(){}begin(){}report(){}done(){}},Wr=class extends kn{constructor(){super(),this._source=new _t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Af(e,t){if(t===void 0||t.workDoneToken===void 0)return new kn;let n=t.workDoneToken;return delete t.workDoneToken,new Mt(e,n)}vt.attachWorkDone=Af;var Wf=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(t){super.initialize(t),t?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(_t.WorkDoneProgressCancelNotification.type,n=>{let r=Mt.Instances.get(n.token);(r instanceof Ar||r instanceof Wr)&&r.cancel()}))}attachWorkDoneProgress(t){return t===void 0?new kn:new Mt(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){let t=(0,Lf.generateUuid)();return this.connection.sendRequest(_t.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new Ar(this.connection,t))}else return Promise.resolve(new Wr)}};vt.ProgressFeature=Wf;var ns;(function(e){e.type=new _t.ProgressType})(ns||(ns={}));var rs=class{constructor(t,n){this._connection=t,this._token=n}report(t){this._connection.sendProgress(ns.type,this._token,t)}};function Hf(e,t){if(t===void 0||t.partialResultToken===void 0)return;let n=t.partialResultToken;return delete t.partialResultToken,new rs(e,n)}vt.attachPartialResult=Hf});var bl=k(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.ConfigurationFeature=void 0;var $f=le(),Uf=Kn(),zf=e=>class extends e{getConfiguration(t){return t?Uf.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let n={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest($f.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(t)?r:r[0]:Array.isArray(t)?[]:null)}};Hr.ConfigurationFeature=zf});var Dl=k(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.WorkspaceFoldersFeature=void 0;var $r=le(),Vf=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(t){super.initialize(t);let n=t.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new $r.Emitter,this.connection.onNotification($r.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(t){super.fillServerCapabilities(t);let n=t.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest($r.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register($r.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Ur.WorkspaceFoldersFeature=Vf});var Rl=k(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.CallHierarchyFeature=void 0;var is=le(),Bf=e=>class extends e{get callHierarchy(){return{onPrepare:t=>this.connection.onRequest(is.CallHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:t=>{let n=is.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:t=>{let n=is.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};zr.CallHierarchyFeature=Bf});var ss=k(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.SemanticTokensBuilder=bt.SemanticTokensDiff=bt.SemanticTokensFeature=void 0;var Vr=le(),Jf=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Vr.SemanticTokensRefreshRequest.type),on:t=>{let n=Vr.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:t=>{let n=Vr.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:t=>{let n=Vr.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};bt.SemanticTokensFeature=Jf;var Br=class{constructor(t,n){this.originalSequence=t,this.modifiedSequence=n}computeDiff(){let t=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<t&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<t){let i=t-1,u=n-1;for(;i>=r&&u>=r&&this.originalSequence[i]===this.modifiedSequence[u];)i--,u--;(i<r||u<r)&&(i++,u++);let h=i-r+1,_=this.modifiedSequence.slice(r,u+1);return _.length===1&&_[0]===this.originalSequence[i]?[{start:r,deleteCount:h-1}]:[{start:r,deleteCount:h,data:_}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<t?[{start:r,deleteCount:t-r}]:[]}};bt.SemanticTokensDiff=Br;var os=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(t,n,r,i,u){let h=t,_=n;this._dataLen>0&&(h-=this._prevLine,h===0&&(_-=this._prevChar)),this._data[this._dataLen++]=h,this._data[this._dataLen++]=_,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=u,this._prevLine=t,this._prevChar=n}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Br(this._prevData,this._data).computeDiff()}:this.build()}};bt.SemanticTokensBuilder=os});var wl=k(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.ShowDocumentFeature=void 0;var Gf=le(),Xf=e=>class extends e{showDocument(t){return this.connection.sendRequest(Gf.ShowDocumentRequest.type,t)}};Jr.ShowDocumentFeature=Xf});var Tl=k(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.FileOperationsFeature=void 0;var an=le(),Qf=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification(an.DidCreateFilesNotification.type,n=>{t(n)})}onDidRenameFiles(t){return this.connection.onNotification(an.DidRenameFilesNotification.type,n=>{t(n)})}onDidDeleteFiles(t){return this.connection.onNotification(an.DidDeleteFilesNotification.type,n=>{t(n)})}onWillCreateFiles(t){return this.connection.onRequest(an.WillCreateFilesRequest.type,(n,r)=>t(n,r))}onWillRenameFiles(t){return this.connection.onRequest(an.WillRenameFilesRequest.type,(n,r)=>t(n,r))}onWillDeleteFiles(t){return this.connection.onRequest(an.WillDeleteFilesRequest.type,(n,r)=>t(n,r))}};Gr.FileOperationsFeature=Qf});var Pl=k(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.LinkedEditingRangeFeature=void 0;var Yf=le(),Kf=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest(Yf.LinkedEditingRangeRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0))}};Xr.LinkedEditingRangeFeature=Kf});var Cl=k(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.TypeHierarchyFeature=void 0;var as=le(),Zf=e=>class extends e{get typeHierarchy(){return{onPrepare:t=>this.connection.onRequest(as.TypeHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:t=>{let n=as.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:t=>{let n=as.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Qr.TypeHierarchyFeature=Zf});var kl=k(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.InlineValueFeature=void 0;var Sl=le(),eh=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(Sl.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest(Sl.InlineValueRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};Yr.InlineValueFeature=eh});var Ol=k(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.FoldingRangeFeature=void 0;var ql=le(),th=e=>class extends e{get foldingRange(){return{refresh:()=>this.connection.sendRequest(ql.FoldingRangeRefreshRequest.type),on:t=>{let n=ql.FoldingRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Kr.FoldingRangeFeature=th});var Ml=k(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.InlayHintFeature=void 0;var cs=le(),nh=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(cs.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(cs.InlayHintRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n))),resolve:t=>this.connection.onRequest(cs.InlayHintResolveRequest.type,(n,r)=>t(n,r))}}};Zr.InlayHintFeature=nh});var El=k(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.DiagnosticFeature=void 0;var qn=le(),rh=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(qn.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(qn.DocumentDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(qn.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:t=>this.connection.onRequest(qn.WorkspaceDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(qn.WorkspaceDiagnosticRequest.partialResult,n)))}}};ei.DiagnosticFeature=rh});var ls=k(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.TextDocuments=void 0;var Et=le(),us=class{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new Et.Emitter,this._onDidOpen=new Et.Emitter,this._onDidClose=new Et.Emitter,this._onDidSave=new Et.Emitter,this._onWillSave=new Et.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=Et.TextDocumentSyncKind.Incremental;let n=[];return n.push(t.onDidOpenTextDocument(r=>{let i=r.textDocument,u=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,u);let h=Object.freeze({document:u});this._onDidOpen.fire(h),this._onDidChangeContent.fire(h)})),n.push(t.onDidChangeTextDocument(r=>{let i=r.textDocument,u=r.contentChanges;if(u.length===0)return;let{version:h}=i;if(h==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let _=this._syncedDocuments.get(i.uri);_!==void 0&&(_=this._configuration.update(_,u,h),this._syncedDocuments.set(i.uri,_),this._onDidChangeContent.fire(Object.freeze({document:_})))})),n.push(t.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(t.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(t.onWillSaveTextDocumentWaitUntil((r,i)=>{let u=this._syncedDocuments.get(r.textDocument.uri);return u!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:u,reason:r.reason}),i):[]})),n.push(t.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),Et.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};ti.TextDocuments=us});var fs=k(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.NotebookDocuments=cn.NotebookSyncFeature=void 0;var Fe=le(),Nl=ls(),ih=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:t=>this.connection.onNotification(Fe.DidOpenNotebookDocumentNotification.type,n=>{t(n)}),onDidChangeNotebookDocument:t=>this.connection.onNotification(Fe.DidChangeNotebookDocumentNotification.type,n=>{t(n)}),onDidSaveNotebookDocument:t=>this.connection.onNotification(Fe.DidSaveNotebookDocumentNotification.type,n=>{t(n)}),onDidCloseNotebookDocument:t=>this.connection.onNotification(Fe.DidCloseNotebookDocumentNotification.type,n=>{t(n)})}}};cn.NotebookSyncFeature=ih;var ni=class e{onDidOpenTextDocument(t){return this.openHandler=t,Fe.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(t){this.openHandler&&this.openHandler(t)}onDidChangeTextDocument(t){return this.changeHandler=t,Fe.Disposable.create(()=>{this.changeHandler=t})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t)}onDidCloseTextDocument(t){return this.closeHandler=t,Fe.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t)}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};ni.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var ds=class{constructor(t){t instanceof Nl.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new Nl.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Fe.Emitter,this._onDidChange=new Fe.Emitter,this._onDidSave=new Fe.Emitter,this._onDidClose=new Fe.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){let n=this.notebookCellMap.get(t);return n&&n[0]}findNotebookDocumentForCell(t){let n=typeof t=="string"?t:t.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){let n=new ni,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(t.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let u of i.cellTextDocuments)n.openTextDocument({textDocument:u});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(t.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let u=this.notebookDocuments.get(i.notebookDocument.uri);if(u===void 0)return;u.version=i.notebookDocument.version;let h=u.metadata,_=!1,C=i.change;C.metadata!==void 0&&(_=!0,u.metadata=C.metadata);let S=[],O=[],N=[],j=[];if(C.cells!==void 0){let V=C.cells;if(V.structure!==void 0){let y=V.structure.array;if(u.cells.splice(y.start,y.deleteCount,...y.cells!==void 0?y.cells:[]),V.structure.didOpen!==void 0)for(let m of V.structure.didOpen)n.openTextDocument({textDocument:m}),S.push(m.uri);if(V.structure.didClose)for(let m of V.structure.didClose)n.closeTextDocument({textDocument:m}),O.push(m.uri)}if(V.data!==void 0){let y=new Map(V.data.map(m=>[m.document,m]));for(let m=0;m<=u.cells.length;m++){let w=y.get(u.cells[m].document);if(w!==void 0){let L=u.cells.splice(m,1,w);if(N.push({old:L[0],new:w}),y.delete(w.document),y.size===0)break}}}if(V.textContent!==void 0)for(let y of V.textContent)n.changeTextDocument({textDocument:y.document,contentChanges:y.changes}),j.push(y.document.uri)}this.updateCellMap(u);let ue={notebookDocument:u};_&&(ue.metadata={old:h,new:u.metadata});let we=[];for(let V of S)we.push(this.getNotebookCell(V));let de=[];for(let V of O)de.push(this.getNotebookCell(V));let ge=[];for(let V of j)ge.push(this.getNotebookCell(V));(we.length>0||de.length>0||N.length>0||ge.length>0)&&(ue.cells={added:we,removed:de,changed:{data:N,textContent:ge}}),(ue.metadata!==void 0||ue.cells!==void 0)&&this._onDidChange.fire(ue)})),r.push(t.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let u=this.notebookDocuments.get(i.notebookDocument.uri);u!==void 0&&this._onDidSave.fire(u)})),r.push(t.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let u=this.notebookDocuments.get(i.notebookDocument.uri);if(u!==void 0){this._onDidClose.fire(u);for(let h of i.cellTextDocuments)n.closeTextDocument({textDocument:h});this.notebookDocuments.delete(i.notebookDocument.uri);for(let h of u.cells)this.notebookCellMap.delete(h.document)}})),Fe.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(t){for(let n of t.cells)this.notebookCellMap.set(n.document,[n,t])}};cn.NotebookDocuments=ds});var jl=k(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.MonikerFeature=void 0;var oh=le(),sh=e=>class extends e{get moniker(){return{on:t=>{let n=oh.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ri.MonikerFeature=sh});var _s=k(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.createConnection=z.combineFeatures=z.combineNotebooksFeatures=z.combineLanguagesFeatures=z.combineWorkspaceFeatures=z.combineWindowFeatures=z.combineClientFeatures=z.combineTracerFeatures=z.combineTelemetryFeatures=z.combineConsoleFeatures=z._NotebooksImpl=z._LanguagesImpl=z.BulkUnregistration=z.BulkRegistration=z.ErrorMessageTracker=void 0;var P=le(),Le=Kn(),gs=ts(),x=vl(),ah=bl(),ch=Dl(),uh=Rl(),lh=ss(),dh=wl(),fh=Tl(),hh=Pl(),gh=Cl(),ph=kl(),mh=Ol(),yh=Ml(),_h=El(),vh=fs(),bh=jl();function hs(e){if(e!==null)return e}var ps=class{constructor(){this._messages=Object.create(null)}add(t){let n=this._messages[t];n||(n=0),n++,this._messages[t]=n}sendErrors(t){Object.keys(this._messages).forEach(n=>{t.window.showErrorMessage(n)})}};z.ErrorMessageTracker=ps;var ii=class{constructor(){}rawAttach(t){this._rawConnection=t}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(t){}initialize(t){}error(t){this.send(P.MessageType.Error,t)}warn(t){this.send(P.MessageType.Warning,t)}info(t){this.send(P.MessageType.Info,t)}log(t){this.send(P.MessageType.Log,t)}debug(t){this.send(P.MessageType.Debug,t)}send(t,n){this._rawConnection&&this._rawConnection.sendNotification(P.LogMessageNotification.type,{type:t,message:n}).catch(()=>{(0,P.RAL)().console.error("Sending log message failed")})}},ms=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}showErrorMessage(t,...n){let r={type:P.MessageType.Error,message:t,actions:n};return this.connection.sendRequest(P.ShowMessageRequest.type,r).then(hs)}showWarningMessage(t,...n){let r={type:P.MessageType.Warning,message:t,actions:n};return this.connection.sendRequest(P.ShowMessageRequest.type,r).then(hs)}showInformationMessage(t,...n){let r={type:P.MessageType.Info,message:t,actions:n};return this.connection.sendRequest(P.ShowMessageRequest.type,r).then(hs)}},xl=(0,dh.ShowDocumentFeature)((0,x.ProgressFeature)(ms)),Il;(function(e){function t(){return new oi}e.create=t})(Il||(z.BulkRegistration=Il={}));var oi=class{constructor(){this._registrations=[],this._registered=new Set}add(t,n){let r=Le.string(t)?t:t.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=gs.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},Fl;(function(e){function t(){return new On(void 0,[])}e.create=t})(Fl||(z.BulkUnregistration=Fl={}));var On=class{constructor(t,n){this._connection=t,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(t){this._connection=t}add(t){this._unregistrations.set(t.method,t)}dispose(){let t=[];for(let r of this._unregistrations.values())t.push(r);let n={unregisterations:t};this._connection.sendRequest(P.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(t){let n=Le.string(t)?t:t.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(P.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},u=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},si=class{attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}register(t,n,r){return t instanceof oi?this.registerMany(t):t instanceof On?this.registerSingle1(t,n,r):this.registerSingle2(t,n)}registerSingle1(t,n,r){let i=Le.string(n)?n:n.method,u=gs.generateUuid(),h={registrations:[{id:u,method:i,registerOptions:r||{}}]};return t.isAttached||t.attach(this.connection),this.connection.sendRequest(P.RegistrationRequest.type,h).then(_=>(t.add({id:u,method:i}),t),_=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(_)))}registerSingle2(t,n){let r=Le.string(t)?t:t.method,i=gs.generateUuid(),u={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(P.RegistrationRequest.type,u).then(h=>P.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),h=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(h)))}unregisterSingle(t,n){let r={unregisterations:[{id:t,method:n}]};return this.connection.sendRequest(P.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${t} failed.`)})}registerMany(t){let n=t.asRegistrationParams();return this.connection.sendRequest(P.RegistrationRequest.type,n).then(()=>new On(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},ys=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}applyEdit(t){function n(i){return i&&!!i.edit}let r=n(t)?t:{edit:t};return this.connection.sendRequest(P.ApplyWorkspaceEditRequest.type,r)}},Ll=(0,fh.FileOperationsFeature)((0,ch.WorkspaceFoldersFeature)((0,ah.ConfigurationFeature)(ys))),ai=class{constructor(){this._trace=P.Trace.Off}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}set trace(t){this._trace=t}log(t,n){this._trace!==P.Trace.Off&&this.connection.sendNotification(P.LogTraceNotification.type,{message:t,verbose:this._trace===P.Trace.Verbose?n:void 0}).catch(()=>{})}},ci=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}logEvent(t){this.connection.sendNotification(P.TelemetryEventNotification.type,t).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},ui=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,x.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,x.attachPartialResult)(this.connection,n)}};z._LanguagesImpl=ui;var Al=(0,mh.FoldingRangeFeature)((0,bh.MonikerFeature)((0,_h.DiagnosticFeature)((0,yh.InlayHintFeature)((0,ph.InlineValueFeature)((0,gh.TypeHierarchyFeature)((0,hh.LinkedEditingRangeFeature)((0,lh.SemanticTokensFeature)((0,uh.CallHierarchyFeature)(ui))))))))),li=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,x.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,x.attachPartialResult)(this.connection,n)}};z._NotebooksImpl=li;var Wl=(0,vh.NotebookSyncFeature)(li);function Hl(e,t){return function(n){return t(e(n))}}z.combineConsoleFeatures=Hl;function $l(e,t){return function(n){return t(e(n))}}z.combineTelemetryFeatures=$l;function Ul(e,t){return function(n){return t(e(n))}}z.combineTracerFeatures=Ul;function zl(e,t){return function(n){return t(e(n))}}z.combineClientFeatures=zl;function Vl(e,t){return function(n){return t(e(n))}}z.combineWindowFeatures=Vl;function Bl(e,t){return function(n){return t(e(n))}}z.combineWorkspaceFeatures=Bl;function Jl(e,t){return function(n){return t(e(n))}}z.combineLanguagesFeatures=Jl;function Gl(e,t){return function(n){return t(e(n))}}z.combineNotebooksFeatures=Gl;function Dh(e,t){function n(i,u,h){return i&&u?h(i,u):i||u}return{__brand:"features",console:n(e.console,t.console,Hl),tracer:n(e.tracer,t.tracer,Ul),telemetry:n(e.telemetry,t.telemetry,$l),client:n(e.client,t.client,zl),window:n(e.window,t.window,Vl),workspace:n(e.workspace,t.workspace,Bl),languages:n(e.languages,t.languages,Jl),notebooks:n(e.notebooks,t.notebooks,Gl)}}z.combineFeatures=Dh;function Rh(e,t,n){let r=n&&n.console?new(n.console(ii)):new ii,i=e(r);r.rawAttach(i);let u=n&&n.tracer?new(n.tracer(ai)):new ai,h=n&&n.telemetry?new(n.telemetry(ci)):new ci,_=n&&n.client?new(n.client(si)):new si,C=n&&n.window?new(n.window(xl)):new xl,S=n&&n.workspace?new(n.workspace(Ll)):new Ll,O=n&&n.languages?new(n.languages(Al)):new Al,N=n&&n.notebooks?new(n.notebooks(Wl)):new Wl,j=[r,u,h,_,C,S,O,N];function ue(y){return y instanceof Promise?y:Le.thenable(y)?new Promise((m,w)=>{y.then(L=>m(L),L=>w(L))}):Promise.resolve(y)}let we,de,ge,V={listen:()=>i.listen(),sendRequest:(y,...m)=>i.sendRequest(Le.string(y)?y:y.method,...m),onRequest:(y,m)=>i.onRequest(y,m),sendNotification:(y,m)=>{let w=Le.string(y)?y:y.method;return i.sendNotification(w,m)},onNotification:(y,m)=>i.onNotification(y,m),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:y=>(de=y,{dispose:()=>{de=void 0}}),onInitialized:y=>i.onNotification(P.InitializedNotification.type,y),onShutdown:y=>(we=y,{dispose:()=>{we=void 0}}),onExit:y=>(ge=y,{dispose:()=>{ge=void 0}}),get console(){return r},get telemetry(){return h},get tracer(){return u},get client(){return _},get window(){return C},get workspace(){return S},get languages(){return O},get notebooks(){return N},onDidChangeConfiguration:y=>i.onNotification(P.DidChangeConfigurationNotification.type,y),onDidChangeWatchedFiles:y=>i.onNotification(P.DidChangeWatchedFilesNotification.type,y),__textDocumentSync:void 0,onDidOpenTextDocument:y=>i.onNotification(P.DidOpenTextDocumentNotification.type,y),onDidChangeTextDocument:y=>i.onNotification(P.DidChangeTextDocumentNotification.type,y),onDidCloseTextDocument:y=>i.onNotification(P.DidCloseTextDocumentNotification.type,y),onWillSaveTextDocument:y=>i.onNotification(P.WillSaveTextDocumentNotification.type,y),onWillSaveTextDocumentWaitUntil:y=>i.onRequest(P.WillSaveTextDocumentWaitUntilRequest.type,y),onDidSaveTextDocument:y=>i.onNotification(P.DidSaveTextDocumentNotification.type,y),sendDiagnostics:y=>i.sendNotification(P.PublishDiagnosticsNotification.type,y),onHover:y=>i.onRequest(P.HoverRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),void 0)),onCompletion:y=>i.onRequest(P.CompletionRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onCompletionResolve:y=>i.onRequest(P.CompletionResolveRequest.type,y),onSignatureHelp:y=>i.onRequest(P.SignatureHelpRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),void 0)),onDeclaration:y=>i.onRequest(P.DeclarationRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onDefinition:y=>i.onRequest(P.DefinitionRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onTypeDefinition:y=>i.onRequest(P.TypeDefinitionRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onImplementation:y=>i.onRequest(P.ImplementationRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onReferences:y=>i.onRequest(P.ReferencesRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onDocumentHighlight:y=>i.onRequest(P.DocumentHighlightRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onDocumentSymbol:y=>i.onRequest(P.DocumentSymbolRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onWorkspaceSymbol:y=>i.onRequest(P.WorkspaceSymbolRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onWorkspaceSymbolResolve:y=>i.onRequest(P.WorkspaceSymbolResolveRequest.type,y),onCodeAction:y=>i.onRequest(P.CodeActionRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onCodeActionResolve:y=>i.onRequest(P.CodeActionResolveRequest.type,(m,w)=>y(m,w)),onCodeLens:y=>i.onRequest(P.CodeLensRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onCodeLensResolve:y=>i.onRequest(P.CodeLensResolveRequest.type,(m,w)=>y(m,w)),onDocumentFormatting:y=>i.onRequest(P.DocumentFormattingRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),void 0)),onDocumentRangeFormatting:y=>i.onRequest(P.DocumentRangeFormattingRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),void 0)),onDocumentOnTypeFormatting:y=>i.onRequest(P.DocumentOnTypeFormattingRequest.type,(m,w)=>y(m,w)),onRenameRequest:y=>i.onRequest(P.RenameRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),void 0)),onPrepareRename:y=>i.onRequest(P.PrepareRenameRequest.type,(m,w)=>y(m,w)),onDocumentLinks:y=>i.onRequest(P.DocumentLinkRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onDocumentLinkResolve:y=>i.onRequest(P.DocumentLinkResolveRequest.type,(m,w)=>y(m,w)),onDocumentColor:y=>i.onRequest(P.DocumentColorRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onColorPresentation:y=>i.onRequest(P.ColorPresentationRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onFoldingRanges:y=>i.onRequest(P.FoldingRangeRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onSelectionRanges:y=>i.onRequest(P.SelectionRangeRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),(0,x.attachPartialResult)(i,m))),onExecuteCommand:y=>i.onRequest(P.ExecuteCommandRequest.type,(m,w)=>y(m,w,(0,x.attachWorkDone)(i,m),void 0)),dispose:()=>i.dispose()};for(let y of j)y.attach(V);return i.onRequest(P.InitializeRequest.type,y=>{t.initialize(y),Le.string(y.trace)&&(u.trace=P.Trace.fromString(y.trace));for(let m of j)m.initialize(y.capabilities);if(de){let m=de(y,new P.CancellationTokenSource().token,(0,x.attachWorkDone)(i,y),void 0);return ue(m).then(w=>{if(w instanceof P.ResponseError)return w;let L=w;L||(L={capabilities:{}});let Y=L.capabilities;Y||(Y={},L.capabilities=Y),Y.textDocumentSync===void 0||Y.textDocumentSync===null?Y.textDocumentSync=Le.number(V.__textDocumentSync)?V.__textDocumentSync:P.TextDocumentSyncKind.None:!Le.number(Y.textDocumentSync)&&!Le.number(Y.textDocumentSync.change)&&(Y.textDocumentSync.change=Le.number(V.__textDocumentSync)?V.__textDocumentSync:P.TextDocumentSyncKind.None);for(let oe of j)oe.fillServerCapabilities(Y);return L})}else{let m={capabilities:{textDocumentSync:P.TextDocumentSyncKind.None}};for(let w of j)w.fillServerCapabilities(m.capabilities);return m}}),i.onRequest(P.ShutdownRequest.type,()=>{if(t.shutdownReceived=!0,we)return we(new P.CancellationTokenSource().token)}),i.onNotification(P.ExitNotification.type,()=>{try{ge&&ge()}finally{t.shutdownReceived?t.exit(0):t.exit(1)}}),i.onNotification(P.SetTraceNotification.type,y=>{u.trace=P.Trace.fromString(y.value)}),V}z.createConnection=Rh});var Xl=k(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.resolveModulePath=qe.FileSystem=qe.resolveGlobalYarnPath=qe.resolveGlobalNodePath=qe.resolve=qe.uriToFilePath=void 0;var wh=require("url"),Be=require("path"),vs=require("fs"),ws=require("child_process");function Th(e){let t=wh.parse(e);if(t.protocol!=="file:"||!t.path)return;let n=t.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let u=n[0],h=n[1];u.length===0&&h.length>1&&h[1]===":"&&n.shift()}return Be.normalize(n.join("/"))}qe.uriToFilePath=Th;function bs(){return process.platform==="win32"}function di(e,t,n,r){let i="NODE_PATH",u=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((h,_)=>{let C=process.env,S=Object.create(null);Object.keys(C).forEach(O=>S[O]=C[O]),t&&vs.existsSync(t)&&(S[i]?S[i]=t+Be.delimiter+S[i]:S[i]=t,r&&r(`NODE_PATH value is: ${S[i]}`)),S.ELECTRON_RUN_AS_NODE="1";try{let O=(0,ws.fork)("",[],{cwd:n,env:S,execArgv:["-e",u]});if(O.pid===void 0){_(new Error(`Starting process to resolve node module  ${e} failed`));return}O.on("error",j=>{_(j)}),O.on("message",j=>{j.c==="r"&&(O.send({c:"e"}),j.s?h(j.r):_(new Error(`Failed to resolve module: ${e}`)))});let N={c:"rs",a:e};O.send(N)}catch(O){_(O)}})}qe.resolve=di;function Ds(e){let t="npm",n=Object.create(null);Object.keys(process.env).forEach(u=>n[u]=process.env[u]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};bs()&&(t="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let u=(0,ws.spawnSync)(t,["config","get","prefix"],r).stdout;if(!u){e&&e("'npm config get prefix' didn't return a value.");return}let h=u.trim();return e&&e(`'npm config get prefix' value is: ${h}`),h.length>0?bs()?Be.join(h,"node_modules"):Be.join(h,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}qe.resolveGlobalNodePath=Ds;function Ph(e){let t="yarn",n={encoding:"utf8"};bs()&&(t="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,ws.spawnSync)(t,["global","dir","--json"],n),u=i.stdout;if(!u){e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr));return}let h=u.trim().split(/\r?\n/);for(let _ of h)try{let C=JSON.parse(_);if(C.type==="log")return Be.join(C.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}qe.resolveGlobalYarnPath=Ph;var Rs;(function(e){let t;function n(){return t!==void 0||(process.platform==="win32"?t=!1:t=!vs.existsSync(__filename.toUpperCase())||!vs.existsSync(__filename.toLowerCase())),t}e.isCaseSensitive=n;function r(i,u){return n()?Be.normalize(u).indexOf(Be.normalize(i))===0:Be.normalize(u).toLowerCase().indexOf(Be.normalize(i).toLowerCase())===0}e.isParent=r})(Rs||(qe.FileSystem=Rs={}));function Ch(e,t,n,r){return n?(Be.isAbsolute(n)||(n=Be.join(e,n)),di(t,n,n,r).then(i=>Rs.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,i=>di(t,Ds(r),e,r))):di(t,Ds(r),e,r)}qe.resolveModulePath=Ch});var Ts=k((Cp,Ql)=>{"use strict";Ql.exports=le()});var Yl=k(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.InlineCompletionFeature=void 0;var Sh=le(),kh=e=>class extends e{get inlineCompletion(){return{on:t=>this.connection.onRequest(Sh.InlineCompletionRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};fi.InlineCompletionFeature=kh});var ed=k(Re=>{"use strict";var qh=Re&&Re.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Zl=Re&&Re.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&qh(t,e,n)};Object.defineProperty(Re,"__esModule",{value:!0});Re.ProposedFeatures=Re.NotebookDocuments=Re.TextDocuments=Re.SemanticTokensBuilder=void 0;var Oh=ss();Object.defineProperty(Re,"SemanticTokensBuilder",{enumerable:!0,get:function(){return Oh.SemanticTokensBuilder}});var Mh=Yl();Zl(le(),Re);var Eh=ls();Object.defineProperty(Re,"TextDocuments",{enumerable:!0,get:function(){return Eh.TextDocuments}});var Nh=fs();Object.defineProperty(Re,"NotebookDocuments",{enumerable:!0,get:function(){return Nh.NotebookDocuments}});Zl(_s(),Re);var Kl;(function(e){e.all={__brand:"features",languages:Mh.InlineCompletionFeature}})(Kl||(Re.ProposedFeatures=Kl={}))});var sd=k(Ae=>{"use strict";var jh=Ae&&Ae.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),id=Ae&&Ae.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&jh(t,e,n)};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createConnection=Ae.Files=void 0;var td=require("node:util"),Ps=Kn(),xh=_s(),Mn=Xl(),Nt=Ts();id(Ts(),Ae);id(ed(),Ae);var nd;(function(e){e.uriToFilePath=Mn.uriToFilePath,e.resolveGlobalNodePath=Mn.resolveGlobalNodePath,e.resolveGlobalYarnPath=Mn.resolveGlobalYarnPath,e.resolve=Mn.resolve,e.resolveModulePath=Mn.resolveModulePath})(nd||(Ae.Files=nd={}));var rd;function hi(){if(rd!==void 0)try{rd.end()}catch{}}var un=!1,od;function Ih(){let e="--clientProcessId";function t(n){try{let r=parseInt(n);isNaN(r)||(od=setInterval(()=>{try{process.kill(r,0)}catch{hi(),process.exit(un?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===e&&n+1<process.argv.length){t(process.argv[n+1]);return}else{let i=r.split("=");i[0]===e&&t(i[1])}}}Ih();var Fh={initialize:e=>{let t=e.processId;Ps.number(t)&&od===void 0&&setInterval(()=>{try{process.kill(t,0)}catch{process.exit(un?0:1)}},3e3)},get shutdownReceived(){return un},set shutdownReceived(e){un=e},exit:e=>{hi(),process.exit(e)}};function Lh(e,t,n,r){let i,u,h,_;return e!==void 0&&e.__brand==="features"&&(i=e,e=t,t=n,n=r),Nt.ConnectionStrategy.is(e)||Nt.ConnectionOptions.is(e)?_=e:(u=e,h=t,_=n),Ah(u,h,_,i)}Ae.createConnection=Lh;function Ah(e,t,n,r){let i=!1;if(!e&&!t&&process.argv.length>2){let C,S,O=process.argv.slice(2);for(let N=0;N<O.length;N++){let j=O[N];if(j==="--node-ipc"){e=new Nt.IPCMessageReader(process),t=new Nt.IPCMessageWriter(process);break}else if(j==="--stdio"){i=!0,e=process.stdin,t=process.stdout;break}else if(j==="--socket"){C=parseInt(O[N+1]);break}else if(j==="--pipe"){S=O[N+1];break}else{var u=j.split("=");if(u[0]==="--socket"){C=parseInt(u[1]);break}else if(u[0]==="--pipe"){S=u[1];break}}}if(C){let N=(0,Nt.createServerSocketTransport)(C);e=N[0],t=N[1]}else if(S){let N=(0,Nt.createServerPipeTransport)(S);e=N[0],t=N[1]}}var h="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+h);if(!t)throw new Error("Connection output stream is not set. "+h);if(Ps.func(e.read)&&Ps.func(e.on)){let C=e;C.on("end",()=>{hi(),process.exit(un?0:1)}),C.on("close",()=>{hi(),process.exit(un?0:1)})}let _=C=>{let S=(0,Nt.createProtocolConnection)(e,t,C,n);return i&&Wh(C),S};return(0,xh.createConnection)(_,Fh,r)}function Wh(e){function t(r){return r.map(i=>typeof i=="string"?i:(0,td.inspect)(i)).join(" ")}let n=new Map;console.assert=function(i,...u){if(!i)if(u.length===0)e.error("Assertion failed");else{let[h,..._]=u;e.error(`Assertion failed: ${h} ${t(_)}`)}},console.count=function(i="default"){let u=String(i),h=n.get(u)??0;h+=1,n.set(u,h),e.log(`${u}: ${u}`)},console.countReset=function(i){i===void 0?n.clear():n.delete(String(i))},console.debug=function(...i){e.log(t(i))},console.dir=function(i,u){e.log((0,td.inspect)(i,u))},console.log=function(...i){e.log(t(i))},console.error=function(...i){e.error(t(i))},console.trace=function(...i){let u=new Error().stack.replace(/(.+\n){2}/,""),h="Trace";i.length!==0&&(h+=`: ${t(i)}`),e.log(`${h}
${u}`)},console.warn=function(...i){e.warn(t(i))}}});var cd=k((Mp,ad)=>{"use strict";ad.exports=sd()});var gd=k((Np,$)=>{"use strict";var dd={};dd.__wbindgen_placeholder__=$.exports;var Je,{TextEncoder:$h,TextDecoder:Uh}=require("util"),ot=new Array(128).fill(void 0);ot.push(void 0,null,!0,!1);function Q(e){return ot[e]}var En=ot.length;function zh(e){e<132||(ot[e]=En,En=e)}function Nn(e){let t=Q(e);return zh(e),t}var Di=0,mi=null;function vi(){return(mi===null||mi.byteLength===0)&&(mi=new Uint8Array(Je.memory.buffer)),mi}var bi=new $h("utf-8"),Vh=typeof bi.encodeInto=="function"?function(e,t){return bi.encodeInto(e,t)}:function(e,t){let n=bi.encode(e);return t.set(n),{read:e.length,written:n.length}};function fd(e,t,n){if(n===void 0){let _=bi.encode(e),C=t(_.length,1)>>>0;return vi().subarray(C,C+_.length).set(_),Di=_.length,C}let r=e.length,i=t(r,1)>>>0,u=vi(),h=0;for(;h<r;h++){let _=e.charCodeAt(h);if(_>127)break;u[i+h]=_}if(h!==r){h!==0&&(e=e.slice(h)),i=n(i,r,r=h+e.length*3,1)>>>0;let _=vi().subarray(i+h,i+r),C=Vh(e,_);h+=C.written}return Di=h,i}function Ss(e){return e==null}var yi=null;function jn(){return(yi===null||yi.byteLength===0)&&(yi=new Int32Array(Je.memory.buffer)),yi}var hd=new Uh("utf-8",{ignoreBOM:!0,fatal:!0});hd.decode();function Ri(e,t){return e=e>>>0,hd.decode(vi().subarray(e,e+t))}function Oe(e){En===ot.length&&ot.push(ot.length+1);let t=En;return En=ot[t],ot[t]=e,t}var _i=null;function Bh(){return(_i===null||_i.byteLength===0)&&(_i=new Float64Array(Je.memory.buffer)),_i}function ks(e){let t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){let i=e.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){let i=e.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(e)){let i=e.length,u="[";i>0&&(u+=ks(e[0]));for(let h=1;h<i;h++)u+=", "+ks(e[h]);return u+="]",u}let n=/\[object ([^\]]+)\]/.exec(toString.call(e)),r;if(n.length>1)r=n[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}$.exports.parse_js=function(e){let t=Je.parse_js(Oe(e));return Nn(t)};$.exports.__wbindgen_object_drop_ref=function(e){Nn(e)};$.exports.__wbindgen_string_get=function(e,t){let n=Q(t),r=typeof n=="string"?n:void 0;var i=Ss(r)?0:fd(r,Je.__wbindgen_malloc,Je.__wbindgen_realloc),u=Di;jn()[e/4+1]=u,jn()[e/4+0]=i};$.exports.__wbg_log_1b4547c43d6ca35b=function(e,t){console.log(Ri(e,t))};$.exports.__wbindgen_error_new=function(e,t){let n=new Error(Ri(e,t));return Oe(n)};$.exports.__wbindgen_boolean_get=function(e){let t=Q(e);return typeof t=="boolean"?t?1:0:2};$.exports.__wbindgen_is_object=function(e){let t=Q(e);return typeof t=="object"&&t!==null};$.exports.__wbindgen_is_undefined=function(e){return Q(e)===void 0};$.exports.__wbindgen_in=function(e,t){return Q(e)in Q(t)};$.exports.__wbindgen_is_string=function(e){return typeof Q(e)=="string"};$.exports.__wbindgen_object_clone_ref=function(e){let t=Q(e);return Oe(t)};$.exports.__wbindgen_jsval_loose_eq=function(e,t){return Q(e)==Q(t)};$.exports.__wbindgen_number_get=function(e,t){let n=Q(t),r=typeof n=="number"?n:void 0;Bh()[e/8+1]=Ss(r)?0:r,jn()[e/4+0]=!Ss(r)};$.exports.__wbindgen_number_new=function(e){return Oe(e)};$.exports.__wbindgen_bigint_from_u64=function(e){let t=BigInt.asUintN(64,e);return Oe(t)};$.exports.__wbindgen_string_new=function(e,t){let n=Ri(e,t);return Oe(n)};$.exports.__wbg_getwithrefkey_4a92a5eca60879b9=function(e,t){let n=Q(e)[Q(t)];return Oe(n)};$.exports.__wbg_set_9182712abebf82ef=function(e,t,n){Q(e)[Nn(t)]=Nn(n)};$.exports.__wbg_new_ffc6d4d085022169=function(){let e=new Array;return Oe(e)};$.exports.__wbg_new_bfd4534b584a9593=function(){return Oe(new Map)};$.exports.__wbg_new_9fb8d994e1c0aaac=function(){let e=new Object;return Oe(e)};$.exports.__wbg_set_f2740edb12e318cd=function(e,t,n){Q(e)[t>>>0]=Nn(n)};$.exports.__wbg_instanceof_ArrayBuffer_e7d53d51371448e2=function(e){let t;try{t=Q(e)instanceof ArrayBuffer}catch{t=!1}return t};$.exports.__wbg_set_d257c6f2da008627=function(e,t,n){let r=Q(e).set(Q(t),Q(n));return Oe(r)};$.exports.__wbg_buffer_a448f833075b71ba=function(e){let t=Q(e).buffer;return Oe(t)};$.exports.__wbg_new_8f67e318f15d7254=function(e){let t=new Uint8Array(Q(e));return Oe(t)};$.exports.__wbg_set_2357bf09366ee480=function(e,t,n){Q(e).set(Q(t),n>>>0)};$.exports.__wbg_length_1d25fa9e4ac21ce7=function(e){return Q(e).length};$.exports.__wbg_instanceof_Uint8Array_bced6f43aed8c1aa=function(e){let t;try{t=Q(e)instanceof Uint8Array}catch{t=!1}return t};$.exports.__wbindgen_debug_string=function(e,t){let n=ks(Q(t)),r=fd(n,Je.__wbindgen_malloc,Je.__wbindgen_realloc),i=Di;jn()[e/4+1]=i,jn()[e/4+0]=r};$.exports.__wbindgen_throw=function(e,t){throw new Error(Ri(e,t))};$.exports.__wbindgen_memory=function(){let e=Je.memory;return Oe(e)};var Jh=require("path").join(__dirname,"does_it_throw_wasm_bg.wasm"),Gh=require("fs").readFileSync(Jh),Xh=new WebAssembly.Module(Gh),Qh=new WebAssembly.Instance(Xh,dd);Je=Qh.exports;$.exports.__wasm=Je});var Ke=Ls(cd()),ln=require("fs/promises");var gi=class e{constructor(t,n,r,i){this._uri=t,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let n=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(n,r)}return this._content}update(t,n){for(let r of t)if(e.isIncremental(r)){let i=ld(r.range),u=this.offsetAt(i.start),h=this.offsetAt(i.end);this._content=this._content.substring(0,u)+r.text+this._content.substring(h,this._content.length);let _=Math.max(i.start.line,0),C=Math.max(i.end.line,0),S=this._lineOffsets,O=ud(r.text,!1,u);if(C-_===O.length)for(let j=0,ue=O.length;j<ue;j++)S[j+_+1]=O[j];else O.length<1e4?S.splice(_+1,C-_,...O):this._lineOffsets=S=S.slice(0,_+1).concat(O,S.slice(C+1));let N=r.text.length-(h-u);if(N!==0)for(let j=_+1+O.length,ue=S.length;j<ue;j++)S[j]=S[j]+N}else if(e.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=ud(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:t};for(;r<i;){let h=Math.floor((r+i)/2);n[h]>t?i=h:r=h+1}let u=r-1;return{line:u,character:t-n[u]}}offsetAt(t){let n=this.getLineOffsets();if(t.line>=n.length)return this._content.length;if(t.line<0)return 0;let r=n[t.line],i=t.line+1<n.length?n[t.line+1]:this._content.length;return Math.max(Math.min(r+t.character,i),r)}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},pi;(function(e){function t(i,u,h,_){return new gi(i,u,h,_)}e.create=t;function n(i,u,h){if(i instanceof gi)return i.update(u,h),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=n;function r(i,u){let h=i.getText(),_=Cs(u.map(Hh),(O,N)=>{let j=O.range.start.line-N.range.start.line;return j===0?O.range.start.character-N.range.start.character:j}),C=0,S=[];for(let O of _){let N=i.offsetAt(O.range.start);if(N<C)throw new Error("Overlapping edit");N>C&&S.push(h.substring(C,N)),O.newText.length&&S.push(O.newText),C=i.offsetAt(O.range.end)}return S.push(h.substr(C)),S.join("")}e.applyEdits=r})(pi||(pi={}));function Cs(e,t){if(e.length<=1)return e;let n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);Cs(r,t),Cs(i,t);let u=0,h=0,_=0;for(;u<r.length&&h<i.length;)t(r[u],i[h])<=0?e[_++]=r[u++]:e[_++]=i[h++];for(;u<r.length;)e[_++]=r[u++];for(;h<i.length;)e[_++]=i[h++];return e}function ud(e,t,n=0){let r=t?[n]:[];for(let i=0;i<e.length;i++){let u=e.charCodeAt(i);(u===13||u===10)&&(u===13&&i+1<e.length&&e.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function ld(e){let t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function Hh(e){let t=ld(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var qs=Ls(gd()),yd=require("util"),pd=require("path"),pe=(0,Ke.createConnection)(Ke.ProposedFeatures.all),xn=new Ke.TextDocuments(pi),Pi=!1,wi=!1,md;pe.onInitialize(e=>{let t=e.capabilities;Pi=!!(t.workspace&&t.workspace.configuration),wi=!!(t.workspace&&t.workspace.workspaceFolders);let n={capabilities:{textDocumentSync:Ke.TextDocumentSyncKind.Incremental}};if(e?.workspaceFolders&&e.workspaceFolders.length>1)throw new Error("This extension only supports one workspace folder at this time");return wi&&(n.capabilities.workspace={workspaceFolders:{supported:!1}}),wi?md=e?.workspaceFolders?.[0]?.uri:md=e.rootUri,n});pe.onInitialized(()=>{Pi&&pe.client.register(Ke.DidChangeConfigurationNotification.type,void 0),wi&&pe.workspace.onDidChangeWorkspaceFolders(e=>{pe.console.log(`Workspace folder change event received. ${JSON.stringify(e)}`)})});var Dt={maxNumberOfProblems:1e6,throwStatementSeverity:"Hint",functionThrowSeverity:"Hint",callToThrowSeverity:"Hint",callToImportedThrowSeverity:"Hint",includeTryStatementThrows:!1},Os=Dt,Ti=new Map;pe.onDidChangeConfiguration(e=>{Pi?Ti.clear():Os=e.settings.doesItThrow||Dt,xn.all().forEach(Ms)});function Yh(e){if(!Pi)return pe.console.info(`does not have config capability, using global settings: ${JSON.stringify(Os)}`),Promise.resolve(Os);let t=Ti.get(e);return t||(t=pe.workspace.getConfiguration({scopeUri:e,section:"doesItThrow"}),Ti.set(e,t)),t}xn.onDidClose(e=>{Ti.delete(e.document.uri)});xn.onDidChangeContent(async e=>{Ms(e.document)});xn.onDidSave(e=>{Ms(e.document)});var Kh=async e=>{try{return await(0,ln.access)(e,ln.constants.R_OK),Promise.resolve(e)}catch(t){return Promise.reject(t)}},Zh=async(e,t)=>{let n=e.endsWith(".ts")||e.endsWith(".tsx"),r=`${pd.resolve(pd.dirname(e.replace("file://","")),t)}`,i=Array(4);return n?i=[`${r}.ts`,`${r}.tsx`,`${r}.js`,`${r}.jsx`]:i=[`${r}.js`,`${r}.jsx`,`${r}.ts`,`${r}.tsx`],Promise.any(i.map(Kh))};async function Ms(e){let t=await Yh(e.uri);t||(pe.console.warn(`No settings found for ${e.uri}, using defaults`),t=Dt);try{let n={uri:e.uri,file_content:e.getText(),ids_to_check:[],typescript_settings:{decorators:!0},function_throw_severity:t?.functionThrowSeverity??Dt.functionThrowSeverity,throw_statement_severity:t?.throwStatementSeverity??Dt.throwStatementSeverity,call_to_imported_throw_severity:t?.callToImportedThrowSeverity??Dt.callToImportedThrowSeverity,call_to_throw_severity:t?.callToThrowSeverity??Dt.callToThrowSeverity,include_try_statement_throws:t?.includeTryStatementThrows??Dt.includeTryStatementThrows},r=(0,qs.parse_js)(n);if(r.relative_imports.length>0){let i=r.relative_imports.map(async _=>{try{let C=await Zh(e.uri,_);return await(0,ln.readFile)(C,"utf-8")}catch(C){pe.console.log(`Error reading file ${(0,yd.inspect)(C)}`);return}}),h=(await Promise.all(i)).filter(_=>!!_).map(_=>{if(!_)return;let C={uri:e.uri,file_content:_,ids_to_check:[],typescript_settings:{decorators:!0}};return(0,qs.parse_js)(C)});for(let _ of h){if(!_)return;if(_.throw_ids.length)for(let C of _.throw_ids){let S=r.imported_identifiers_diagnostics.get(C);S?.diagnostics?.length&&r.diagnostics.push(...S.diagnostics)}}}pe.sendDiagnostics({uri:e.uri,diagnostics:r.diagnostics})}catch(n){console.log(n),pe.console.error(`Error parsing file ${e.uri}`),pe.console.error(`settings are: ${JSON.stringify(t)}`),pe.console.error(`Error: ${n instanceof Error?n.message:JSON.stringify(n)} error`),pe.sendDiagnostics({uri:e.uri,diagnostics:[]})}}pe.onDidChangeWatchedFiles(e=>{pe.console.log(`We received an file change event ${e}, not implemented yet`)});xn.listen(pe);pe.listen();
//# sourceMappingURL=server.js.map
